<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=no">
    <title>Neon OS ¬∑ –ü–æ–≥–æ–¥–∞ ¬∑ –í—Å–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Asap:wght@300;400;500;600;700&family=Amaranth:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* –ü–û–õ–ù–´–ô –ù–ï–û–ù–û–í–´–ô –°–¢–ò–õ–¨ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --hue1: 255; --hue2: 222; --border: 1px; --border-color: hsl(var(--hue2), 12%, 20%);
            --radius: 22px; --ease: cubic-bezier(0.5, 1, 0.89, 1);
            --glass-bg: linear-gradient(235deg, hsl(var(--hue1) 50% 10% / 0.8), hsl(var(--hue1) 50% 10% / 0) 33%), 
                        linear-gradient(45deg , hsl(var(--hue2) 50% 10% / 0.8), hsl(var(--hue2) 50% 10% / 0) 33%), 
                        linear-gradient(hsl(220deg 25% 4.8% / 0.9));
            --font-mono: 'JetBrains Mono', monospace;
            --wallpaper: url('https://assets.codepen.io/13471/abstract-light.jpg');
            --wallpaper-overlay: linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%));
        }
        body {
            background: #08090d;
            background-image: var(--wallpaper), var(--wallpaper-overlay);
            background-size: cover; background-position: center; background-blend-mode: hard-light;
            color: #e0e5ee; font-family: 'Asap', sans-serif; min-height: 100vh;
            transition: background-image 0.4s var(--ease);
        }
        #app { min-height: 100svh; padding: 2svw; display: flex; flex-direction: column; justify-content: space-between; }
        #app > header {
            background: rgba(0,0,0,0.2); backdrop-filter: blur(8px); padding: 1.5em 2em; border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1); max-width: 750px;
        }
        #app > header h1 { 
            color: color-mix(in oklab, #fff 70%, hsl(var(--hue1) 50% 50%)); 
            font-size: 2rem; text-shadow: 0 0 12px hsl(var(--hue1) 70% 60% / 0.5);
        }
        #app > header p { 
            color: color-mix(in oklab, #fff 40%, hsl(var(--hue2) 50% 50%)); 
            display: flex; gap: 12px; flex-wrap: wrap; 
        }
        #app > footer {
            align-self: end; background: rgba(0,0,0,0.25); backdrop-filter: blur(8px); padding: 1em 2em; border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1); display: flex; flex-wrap: wrap; gap: 0.5em;
        }
        #app > footer h2 { width: 100%; font-size: 1em; font-weight: 400; color: rgba(255,255,255,0.8); }
        footer h2 button {
            font-family: Amaranth, sans-serif; font-style: italic; display: inline-flex; padding: 0.25em 0.8em;
            background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.25); border-radius: 3em;
            color: white; cursor: pointer; font-size: 0.9rem;
        }
        #app > footer [type=range] { width: 180px; accent-color: hsl(var(--hue2) 66% 60%); }
        
        .wallpaper-btn {
            background: rgba(20,30,50,0.6); border: 1px solid rgba(255,255,255,0.2); color: white;
            padding: 0.4em 1.2em; border-radius: 30px; display: inline-flex; align-items: center; gap: 6px; cursor: pointer;
        }
        
        #menu {
            visibility: hidden; opacity: 0; pointer-events: none; transition: 0.25s var(--ease); filter: blur(4px);
            position: fixed; top: 140px; left: 2svw; min-width: 290px; max-width: 330px;
            border-radius: var(--radius); border: var(--border) solid var(--border-color); padding: 1em;
            background: var(--glass-bg); backdrop-filter: blur(16px); z-index: 10000; max-height: 80vh; overflow-y: auto;
            color: #b3bbcc;
        }
        #menu.open { visibility: visible; opacity: 1; pointer-events: auto; filter: blur(0px); }
        #menu .inner { display: flex; flex-direction: column; gap: 0.6em; font-size: 0.85rem; }
        #menu li {
            --item-hue: var(--hue2); padding: 0.6em 0.8em; display: flex; align-items: center; gap: 0.7em;
            border-radius: 14px; background: linear-gradient(90deg in oklch, hsl(var(--item-hue) 29% 13% / var(--item-opacity,0)),
                      hsl(var(--item-hue) 30% 15% / var(--item-opacity,0)) 24% 32%, transparent 95%) border-box;
            cursor: pointer; font-size: 0.85rem; border: 1px solid transparent;
        }
        #menu li svg { width: 18px; height: 18px; stroke-width: 1.5; }
        #menu li:hover { --item-opacity: 0.6; color: white; }
        
        .wallpaper-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 8px;
        }
        .wallpaper-item {
            aspect-ratio: 16/9; border-radius: 8px; border: 1.5px solid transparent; cursor: pointer;
            background-size: cover; background-position: center;
        }
        .wallpaper-item.active { border-color: white; box-shadow: 0 0 12px hsl(var(--hue1) 80% 70%); }
        
        .neon-app {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 700px; max-width: 95vw; max-height: 85vh; overflow-y: auto;
            background: linear-gradient(145deg, hsl(var(--hue1) 40% 12% / 0.97), hsl(var(--hue2) 40% 8% / 0.97));
            backdrop-filter: blur(24px); border: 1px solid hsl(var(--hue1) 60% 60% / 0.5); border-radius: 28px;
            padding: 1.8em; box-shadow: 0 20px 48px -12px black; color: white; z-index: 20000;
            opacity: 0; animation: neonAppear 0.3s var(--ease) forwards;
        }
        @keyframes neonAppear {
            0% { opacity: 0; transform: translate(-50%, -44%) scale(0.96); filter: blur(4px); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: blur(0px); }
        }
        .neon-app .app-header { 
            display: flex; align-items: center; gap: 12px; margin-bottom: 1.5em; 
            border-bottom: 1px solid hsl(var(--hue2) 60% 70% / 0.3); padding-bottom: 0.8em;
        }
        .neon-app .app-header svg { width: 28px; height: 28px; stroke: hsl(var(--hue1) 80% 80%); }
        .neon-app .app-header h2 { 
            font-size: 1.7rem; font-family: 'Amaranth', sans-serif; font-style: italic;
            text-shadow: 0 0 10px hsl(var(--hue1) 80% 70% / 0.6); margin: 0;
        }
        .neon-app .app-content { 
            background: rgba(0,0,0,0.25); border-radius: 20px; padding: 1.4em;
            border: 0.5px solid rgba(255,255,255,0.1); 
        }
        .neon-app .app-close { 
            position: absolute; top: 16px; right: 20px; background: transparent; border: none;
            color: rgba(255,255,255,0.6); font-size: 28px; cursor: pointer; padding: 0 10px;
            border-radius: 30px; z-index: 10;
        }
        .neon-app .app-close:hover { background: rgba(255,255,255,0.15); color: white; }
        
        /* ===== –ü–û–ì–û–î–ê - –í–°–ï –ì–û–†–û–î–ê –†–û–°–°–ò–ò ===== */
        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
            padding: 4px;
            margin-bottom: 20px;
        }
        
        .weather-city-btn {
            background: rgba(30,40,70,0.7);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 30px;
            padding: 0.6em 0.8em;
            color: rgba(255,255,255,0.9);
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .weather-city-btn:hover {
            background: rgba(80,100,180,0.8);
            border-color: rgba(255,255,255,0.4);
            transform: scale(1.02);
        }
        
        .weather-city-btn.active {
            background: hsl(var(--hue1), 70%, 60%);
            border-color: white;
            box-shadow: 0 0 12px hsl(var(--hue1), 70%, 60% / 0.5);
        }
        
        .weather-display {
            background: rgba(0,0,0,0.3);
            border-radius: 24px;
            padding: 1.5em;
            margin-top: 16px;
            text-align: center;
        }
        
        .weather-temp {
            font-size: 3.5rem;
            font-weight: 300;
            font-family: var(--font-mono);
            line-height: 1;
            color: hsl(var(--hue1), 80%, 75%);
        }
        
        .weather-condition {
            font-size: 1.3rem;
            margin: 8px 0 16px;
            opacity: 0.95;
        }
        
        .weather-details {
            display: flex;
            justify-content: center;
            gap: 24px;
            flex-wrap: wrap;
            background: rgba(0,0,0,0.2);
            padding: 12px;
            border-radius: 40px;
        }
        
        .snake-grid { 
            display: grid; grid-template-columns: repeat(15, 1fr); gap: 3px; 
            background: rgba(0,0,0,0.5); padding: 10px; border-radius: 20px; aspect-ratio: 1;
        }
        .snake-cell { aspect-ratio: 1; background: rgba(20,30,50,0.7); border-radius: 6px; }
        .snake-cell.snake { background: hsl(var(--hue1), 80%, 65%); box-shadow: 0 0 10px hsl(var(--hue1), 80%, 60%); }
        .snake-cell.food { background: hsl(var(--hue2), 80%, 65%); box-shadow: 0 0 10px hsl(var(--hue2), 80%, 60%); border-radius: 50%; }
        
        .file-list { display: flex; flex-direction: column; gap: 10px; max-height: 350px; overflow-y: auto; margin-bottom: 20px; }
        .file-item { 
            display: flex; align-items: center; gap: 15px; padding: 0.9em 1.2em; 
            background: rgba(0,0,0,0.35); border-radius: 18px; border: 1px solid rgba(255,255,255,0.05);
            cursor: pointer; transition: 0.15s;
        }
        .file-item:hover { background: rgba(60,80,140,0.45); border-color: rgba(255,255,255,0.2); }
        .file-icon { font-size: 2rem; }
        .file-info { flex: 1; }
        .file-name { font-weight: 600; color: white; font-size: 1rem; }
        .file-meta { font-size: 0.7rem; opacity: 0.7; }
        .file-actions { display: flex; gap: 10px; }
        .file-run { 
            background: hsl(var(--hue1), 70%, 60%); border: none; border-radius: 30px; 
            padding: 0.5em 1.3em; color: white; font-size: 0.8rem; font-weight: 600; cursor: pointer;
        }
        .file-delete { background: rgba(200,60,60,0.7); border: none; border-radius: 30px; padding: 0.5em 1.1em; color: white; font-size: 0.8rem; cursor: pointer; }
        .download-area { 
            border: 2px dashed rgba(255,255,255,0.3); border-radius: 20px; padding: 1.5em; 
            text-align: center; cursor: pointer; margin-top: 10px;
        }
        
        .browser-url { 
            flex: 1; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.15); 
            border-radius: 30px; padding: 0.7em 1.2em; color: white;
        }
        .browser-go { 
            background: hsl(var(--hue1), 70%, 60%); border: none; border-radius: 30px; 
            padding: 0.7em 1.8em; color: white; font-weight: 600; cursor: pointer;
        }
        
        .neon-notification {
            position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.95); backdrop-filter: blur(12px); color: white; padding: 0.9em 2.2em;
            border-radius: 50px; border: 1px solid hsl(var(--hue1) 70% 70% / 0.6); font-size: 0.95rem;
            z-index: 30000; animation: notifFade 4s ease forwards; max-width: 90vw;
        }
        @keyframes notifFade {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            15% { opacity: 1; transform: translateX(-50%) translateY(0); }
            85% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        
        .social-icon {
            position: fixed; bottom: 16px; right: 16px; z-index: 9999; background: rgba(0,0,0,0.4);
            backdrop-filter: blur(8px); padding: 0.5em 1.2em; border-radius: 30px; color: #ccc; text-decoration: none;
            display: flex; gap: 6px; align-items: center; font-size: 0.85rem;
        }
        .social-icon.codepen { right: auto; left: 16px; }
    </style>
</head>
<body>

<main id="app">
    <header>
        <h1>‚ö° NEON OS ¬∑ –ü–û–ì–û–î–ê ¬∑ 107 –ì–û–†–û–î–û–í –†–û–°–°–ò–ò</h1>
        <p>
            üöÄ –í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã ¬∑ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ¬∑ –ë–µ–∑ –∑–∞–≥–ª—É—à–µ–∫
            <span class="wallpaper-btn" id="openWallpaperMenu">üé® –û–±–æ–∏</span>
        </p>
    </header>
    <footer class="dark">
        <h2>üé® –¢–µ–º–∞ ¬∑ <button class='random' id="randomBtn">randomize</button></h2>
        <input type="range" id="h1" min="0" max="360" value="255">
        <input type="range" id="h2" min="0" max="360" value="222">
    </footer>
</main>

<aside id="menu">
    <div class="inner">
        <section>
            <header>üéÆ –ò–ì–†–´</header>
            <ul>
                <li data-app="snake"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/></svg> –ó–º–µ–π–∫–∞ Neon</li>
                <li data-app="snake2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 12h16M12 4v16"/></svg> –ó–º–µ–π–∫–∞ –ö–ª–∞—Å—Å–∏–∫</li>
            </ul>
        </section>
        <hr>
        <section>
            <header>üåê –ò–ù–¢–ï–†–ù–ï–¢</header>
            <ul>
                <li data-app="browser"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/></svg> NeonBrowser</li>
                <li data-app="files"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/></svg> –§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä</li>
            </ul>
        </section>
        <hr>
        <section>
            <header>üß∞ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø</header>
            <ul>
                <li data-app="weather"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg> –ü–æ–≥–æ–¥–∞ ¬∑ –í—Å–µ –≥–æ—Ä–æ–¥–∞</li>
                <li data-app="calculator"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"/></svg> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</li>
                <li data-app="terminal"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg> –¢–µ—Ä–º–∏–Ω–∞–ª</li>
                <li data-app="timer"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 6v6l4 2m-4-10.5a9 9 0 1 0 0 18 9 9 0 0 0 0-18Z"/></svg> –¢–∞–π–º–µ—Ä</li>
            </ul>
        </section>
        <section>
            <header>üé® –û–±–æ–∏</header>
            <div class="wallpaper-grid" id="wallpaperGrid"></div>
        </section>
    </div>
</aside>

<a class="social-icon codepen" href="https://codepen.io/simeydotme">‚ö° NEON OS</a>
<a class="social-icon twitter" href="https://twitter.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737s-2.643 2.06-2.62 3.737v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84 0 0 0 .497-3.753c-.002-.249 1.51-2.772 1.818-4.013z"/></svg></a>
<a class="social-icon github" href="https://github.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2 4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0c-2.4-1.6-3.5-1.3-3.5-1.3a4.2 4.2 0 0 0-.1 3.2 4.6 4.6 0 0 0-1.3 3.2c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2v3.5"/></svg></a>

<script>
    (function(){
        "use strict";

        // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
        const $menu = document.getElementById('menu');
        const $menuItems = $menu.querySelectorAll('li');
        const $hue1 = document.getElementById('h1');
        const $hue2 = document.getElementById('h2');
        const $rand = document.getElementById('randomBtn');
        const $openWallpaperBtn = document.getElementById('openWallpaperMenu');

        // ========== API –ö–õ–Æ–ß WEATHERAPI ==========
        const WEATHER_API_KEY = "181ac29b75bb4115a86191537261102";
        
        // ========== –í–°–ï –ì–û–†–û–î–ê –†–û–°–°–ò–ò (107 –ì–û–†–û–î–û–í) ==========
        const ALL_RUSSIAN_CITIES = [
            // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥
            "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–¢–≤–µ—Ä—å", "–¢—É–ª–∞", "–Ø—Ä–æ—Å–ª–∞–≤–ª—å", "–í–ª–∞–¥–∏–º–∏—Ä", "–ö–∞–ª—É–≥–∞", "–°–º–æ–ª–µ–Ω—Å–∫", "–†—è–∑–∞–Ω—å", "–ö–æ—Å—Ç—Ä–æ–º–∞",
            "–ò–≤–∞–Ω–æ–≤–æ", "–ë—Ä—è–Ω—Å–∫", "–û—Ä–µ–ª", "–ö—É—Ä—Å–∫", "–ë–µ–ª–≥–æ—Ä–æ–¥", "–í–æ—Ä–æ–Ω–µ–∂", "–õ–∏–ø–µ—Ü–∫", "–¢–∞–º–±–æ–≤",
            // –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥
            "–ú—É—Ä–º–∞–Ω—Å–∫", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫", "–í–æ–ª–æ–≥–¥–∞", "–ù–æ–≤–≥–æ—Ä–æ–¥", "–ü—Å–∫–æ–≤", "–ü–µ—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫", "–°—ã–∫—Ç—ã–≤–∫–∞—Ä", "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥",
            // –Æ–∂–Ω—ã–π –æ–∫—Ä—É–≥
            "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É", "–í–æ–ª–≥–æ–≥—Ä–∞–¥", "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å", "–≠–ª–∏—Å—Ç–∞", "–ú–∞–π–∫–æ–ø", "–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å", "–ß–µ—Ä–∫–µ—Å—Å–∫", "–ù–∞–ª—å—á–∏–∫",
            "–í–ª–∞–¥–∏–∫–∞–≤–∫–∞–∑", "–ì—Ä–æ–∑–Ω—ã–π", "–ú–∞—Ö–∞—á–∫–∞–ª–∞", "–ù–∞–∑—Ä–∞–Ω—å", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", "–°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å",
            // –ü—Ä–∏–≤–æ–ª–∂—å–µ
            "–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥", "–ö–∞–∑–∞–Ω—å", "–°–∞–º–∞—Ä–∞", "–°–∞—Ä–∞—Ç–æ–≤", "–ü–µ–Ω–∑–∞", "–£–ª—å—è–Ω–æ–≤—Å–∫", "–ô–æ—à–∫–∞—Ä-–û–ª–∞", "–°–∞—Ä–∞–Ω—Å–∫", "–ß–µ–±–æ–∫—Å–∞—Ä—ã",
            "–ö–∏—Ä–æ–≤", "–ü–µ—Ä–º—å", "–ò–∂–µ–≤—Å–∫", "–û—Ä–µ–Ω–±—É—Ä–≥", "–£—Ñ–∞",
            // –£—Ä–∞–ª
            "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ß–µ–ª—è–±–∏–Ω—Å–∫", "–¢—é–º–µ–Ω—å", "–ö—É—Ä–≥–∞–Ω", "–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫", "–°–∞–ª–µ—Ö–∞—Ä–¥",
            // –°–∏–±–∏—Ä—å
            "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "–û–º—Å–∫", "–¢–æ–º—Å–∫", "–ö–µ–º–µ—Ä–æ–≤–æ", "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫", "–ë–∞—Ä–Ω–∞—É–ª", "–ì–æ—Ä–Ω–æ-–ê–ª—Ç–∞–π—Å–∫", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
            "–ê–±–∞–∫–∞–Ω", "–ö—ã–∑—ã–ª", "–ò—Ä–∫—É—Ç—Å–∫", "–£–ª–∞–Ω-–£–¥—ç", "–ß–∏—Ç–∞",
            // –î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫
            "–Ø–∫—É—Ç—Å–∫", "–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫", "–•–∞–±–∞—Ä–æ–≤—Å–∫", "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫", "–ú–∞–≥–∞–¥–∞–Ω", "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π",
            "–ê–Ω–∞–¥—ã—Ä—å", "–ë–∏—Ä–æ–±–∏–¥–∂–∞–Ω",
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
            "–°–æ—á–∏", "–¢–æ–ª—å—è—Ç—Ç–∏", "–ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã", "–£–ª—å—è–Ω–æ–≤—Å–∫", "–ë–∞–ª–∞—à–∏—Ö–∞", "–ü–æ–¥–æ–ª—å—Å–∫", "–•–∏–º–∫–∏", "–¢–∞–≥–∞–Ω—Ä–æ–≥", "–®–∞—Ö—Ç—ã",
            "–í–æ–ª–∂—Å–∫–∏–π", "–°—Ç–µ—Ä–ª–∏—Ç–∞–º–∞–∫", "–û—Ä—Å–∫", "–ë—Ä–∞—Ç—Å–∫", "–ù–∏–∂–Ω–∏–π –¢–∞–≥–∏–ª", "–ú–∞–≥–Ω–∏—Ç–æ–≥–æ—Ä—Å–∫", "–°—É—Ä–≥—É—Ç", "–ù–∏–∂–Ω–µ–≤–∞—Ä—Ç–æ–≤—Å–∫",
            "–ù–µ—Ñ—Ç–µ—é–≥–∞–Ω—Å–∫", "–ù–æ—Ä–∏–ª—å—Å–∫", "–ê—á–∏–Ω—Å–∫", "–£—Å—Å—É—Ä–∏–π—Å–∫", "–ù–∞—Ö–æ–¥–∫–∞"
        ].sort((a, b) => a.localeCompare(b, 'ru'));

        // ========== –§–ê–ô–õ–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê ==========
        let neonFileSystem = JSON.parse(localStorage.getItem('neon-files')) || [
            { name: "snake_game.app", type: "app", size: "1.8 MB", date: new Date().toLocaleDateString(), appType: "snake", appName: "Neon Snake" },
            { name: "browser.app", type: "app", size: "2.1 MB", date: new Date().toLocaleDateString(), appType: "browser", appName: "NeonBrowser" },
            { name: "calculator.app", type: "app", size: "1.2 MB", date: new Date().toLocaleDateString(), appType: "calculator", appName: "Neon Calc" },
            { name: "weather.app", type: "app", size: "1.5 MB", date: new Date().toLocaleDateString(), appType: "weather", appName: "Neon Weather" }
        ];

        function saveFileSystem() {
            localStorage.setItem('neon-files', JSON.stringify(neonFileSystem));
        }

        // ========== –ó–ê–ü–£–°–ö .app ==========
        function runAppFile(file) {
            showNotification(`üöÄ –ó–∞–ø—É—Å–∫: ${file.appName || file.name}`, 1500);
            
            if (file.appType === 'snake' || file.name.includes('snake')) createSnakeGame(15);
            else if (file.appType === 'browser' || file.name.includes('browser')) createNeonBrowser();
            else if (file.appType === 'calculator' || file.name.includes('calc')) createCalculator();
            else if (file.appType === 'weather' || file.name.includes('weather')) createWeatherApp();
            else createCalculator();
        }

        function runFile(file) {
            const ext = file.type.toLowerCase();
            if (ext === 'app') { runAppFile(file); return; }
            if (['exe', 'bat'].includes(ext)) {
                const appName = prompt(`–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:`, file.name.split('.')[0]);
                if (appName) {
                    neonFileSystem.push({ name: `${appName}.app`, type: 'app', size: '1.5 MB', date: new Date().toLocaleDateString(), appType: 'app', appName });
                    saveFileSystem();
                    showNotification(`‚úÖ ${appName}.app —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!`);
                }
                return;
            }
            showNotification(`‚ùå –ù–µ –º–æ–≥—É –∑–∞–ø—É—Å—Ç–∏—Ç—å .${ext}`, 1500);
        }

        // ========== –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í ==========
        function handleDownloadedFile(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            neonFileSystem.push({
                name: filename, type: ext, size: "1.2 MB", date: new Date().toLocaleDateString(),
                content: `–ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${filename}`
            });
            saveFileSystem();
            showNotification(`üì• –ó–∞–≥—Ä—É–∂–µ–Ω: ${filename}`);
        }

        // ========== –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–† ==========
        function createFileManager() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app'; win.style.width = '650px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/></svg><h2>–§–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä</h2></div>
                <div class="app-content">
                    <div class="file-list" id="fileList"></div>
                    <div class="download-area" id="downloadArea">‚¨áÔ∏è –ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã</div>
                    <input type="file" id="fileUpload" multiple style="display: none;">
                </div>
            `;
            document.body.appendChild(win);
            
            function renderFiles() {
                const list = win.querySelector('#fileList');
                list.innerHTML = '';
                neonFileSystem.forEach((file, index) => {
                    const item = document.createElement('div'); item.className = 'file-item';
                    item.innerHTML = `
                        <span class="file-icon">${file.type === 'app' ? '‚úÖ' : 'üìÑ'}</span>
                        <div class="file-info"><div class="file-name">${file.name}</div><div class="file-meta">${file.size} ¬∑ ${file.type}</div></div>
                        <div class="file-actions"><button class="file-run" data-index="${index}">üöÄ –ó–∞–ø—É—Å–∫</button><button class="file-delete" data-index="${index}">üóëÔ∏è</button></div>
                    `;
                    item.querySelector('.file-run').addEventListener('click', (e) => { e.stopPropagation(); runFile(file); });
                    item.querySelector('.file-delete').addEventListener('click', (e) => { e.stopPropagation(); neonFileSystem.splice(index, 1); saveFileSystem(); renderFiles(); showNotification(`üóëÔ∏è ${file.name} —É–¥–∞–ª–µ–Ω`); });
                    item.addEventListener('dblclick', () => runFile(file));
                    list.appendChild(item);
                });
            }
            
            const dropArea = win.querySelector('#downloadArea');
            const fileInput = win.querySelector('#fileUpload');
            dropArea.addEventListener('click', () => fileInput.click());
            dropArea.addEventListener('dragover', (e) => e.preventDefault());
            dropArea.addEventListener('drop', (e) => { e.preventDefault(); for (let f of e.dataTransfer.files) handleDownloadedFile(f.name); renderFiles(); });
            fileInput.addEventListener('change', () => { for (let f of fileInput.files) handleDownloadedFile(f.name); renderFiles(); fileInput.value = ''; });
            
            renderFiles();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ó–ú–ï–ô–ö–ê ==========
        function createSnakeGame(size = 15) {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app'; win.style.width = '550px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/></svg><h2>Neon Snake</h2></div>
                <div class="app-content">
                    <div id="snakeGrid" class="snake-grid" style="grid-template-columns: repeat(${size}, 1fr);"></div>
                    <div style="display:flex; justify-content:space-between; margin-top:16px;"><span>üêç –î–ª–∏–Ω–∞: <span id="snakeScore">3</span></span><span id="snakeStatus">‚ñ∂Ô∏è</span></div>
                    <button id="snakeRestart" style="background:hsl(var(--hue1),70%,60%); border:none; padding:0.7em; border-radius:30px; color:white; width:100%; margin-top:12px;">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                </div>
            `;
            document.body.appendChild(win);
            
            const grid = win.querySelector('#snakeGrid');
            for (let i = 0; i < size * size; i++) grid.appendChild(document.createElement('div')).className = 'snake-cell';
            const cells = win.querySelectorAll('.snake-cell');
            let snake = [Math.floor(size/2) * size + Math.floor(size/2)], direction = 'right', nextDirection = 'right', food = -1, gameActive = true, score = 3, gameInterval;
            
            function placeFood() { const empty = []; cells.forEach((c,i)=> {if(!snake.includes(i)) empty.push(i);}); if(empty.length) { food = empty[Math.floor(Math.random()*empty.length)]; cells[food]?.classList.add('food'); } }
            function updateGrid() { cells.forEach(c => c.classList.remove('snake','food')); snake.forEach(s => cells[s]?.classList.add('snake')); if(food!==-1) cells[food]?.classList.add('food'); }
            function moveSnake() {
                if(!gameActive) return;
                direction = nextDirection;
                const head = snake[0], row = Math.floor(head/size), col = head%size;
                let newHead = head;
                if(direction==='right') newHead = row*size + (col+1);
                if(direction==='left') newHead = row*size + (col-1);
                if(direction==='up') newHead = (row-1)*size + col;
                if(direction==='down') newHead = (row+1)*size + col;
                
                if(newHead<0||newHead>=size*size||(direction==='right'&&col===size-1)||(direction==='left'&&col===0)||(direction==='up'&&row===0)||(direction==='down'&&row===size-1)||(snake.includes(newHead)&&newHead!==snake[snake.length-1])) {
                    win.querySelector('#snakeStatus').innerHTML = 'üíÄ'; gameActive = false; clearInterval(gameInterval); return;
                }
                
                snake.unshift(newHead);
                if(newHead===food) { score++; win.querySelector('#snakeScore').textContent = score; placeFood(); } else snake.pop();
                updateGrid();
            }
            
            function initGame() {
                gameActive = true; win.querySelector('#snakeStatus').innerHTML = '‚ñ∂Ô∏è';
                snake = [Math.floor(size/2)*size + Math.floor(size/2)]; direction = 'right'; nextDirection = 'right'; score = 3;
                win.querySelector('#snakeScore').textContent = '3';
                if(food!==-1) cells[food]?.classList.remove('food');
                updateGrid(); placeFood();
                if(gameInterval) clearInterval(gameInterval);
                gameInterval = setInterval(moveSnake, 150);
            }
            
            win.addEventListener('keydown', (e) => { if(!gameActive) return; e.preventDefault(); if(e.key==='ArrowUp'&&direction!=='down') nextDirection='up'; if(e.key==='ArrowDown'&&direction!=='up') nextDirection='down'; if(e.key==='ArrowLeft'&&direction!=='right') nextDirection='left'; if(e.key==='ArrowRight'&&direction!=='left') nextDirection='right'; });
            win.querySelector('#snakeRestart').addEventListener('click', initGame);
            win.tabIndex = 0; win.focus();
            initGame();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== NEONBROWSER ==========
        function createNeonBrowser() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app'; win.style.width = '650px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/></svg><h2>NeonBrowser</h2></div>
                <div class="app-content">
                    <div style="display:flex; gap:10px; margin-bottom:16px;"><input id="browserUrl" class="browser-url" value="https://example.com"><button id="browserGo" class="browser-go">–ü–µ—Ä–µ–π—Ç–∏</button></div>
                    <div style="background:white; border-radius:20px; height:320px;"><iframe id="browserFrame" src="https://example.com" style="width:100%; height:100%; border:none;"></iframe></div>
                </div>
            `;
            document.body.appendChild(win);
            const urlInput = win.querySelector('#browserUrl'), frame = win.querySelector('#browserFrame');
            win.querySelector('#browserGo').addEventListener('click', () => { let url = urlInput.value.trim(); if(!url.startsWith('http')) url='https://'+url; frame.src = url; });
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ==========
        function createCalculator() {
            closeCurrentApp();
            const win = document.createElement('div'); win.className = 'neon-app'; win.style.width = '380px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"/></svg><h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2></div>
                <div class="app-content">
                    <div id="calcDisplay" style="background:rgba(0,0,0,0.5); padding:0.8em; border-radius:16px; text-align:right; font-size:2.2rem; margin-bottom:16px;">0</div>
                    <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;">${['C','√∑','√ó','‚àí',7,8,9,'+',4,5,6,'=',1,2,3,0,'.'].map(v => `<button class="calc-btn" style="background:rgba(20,30,50,0.8); border:1px solid rgba(255,255,255,0.1); padding:0.8em; border-radius:16px; color:white; cursor:pointer;">${v}</button>`).join('')}</div>
                </div>
            `;
            document.body.appendChild(win);
            const display = win.querySelector('#calcDisplay'); let current='0', prev='', op=null, reset=false;
            win.querySelectorAll('.calc-btn').forEach(btn => { btn.addEventListener('click', (e) => {
                e.stopPropagation(); const txt = btn.textContent;
                if(!isNaN(txt)||txt==='.') { if(txt==='.'&&current.includes('.')) return; if(current==='0'||reset) { current=txt; reset=false; } else current+=txt; display.textContent = current.slice(0,12); }
                else if(txt==='C') { current='0'; prev=''; op=null; reset=false; display.textContent='0'; }
                else if(txt==='=') { if(op) { const a=parseFloat(prev), b=parseFloat(current); if(!isNaN(a)&&!isNaN(b)) { if(op==='+') current=(a+b).toString(); if(op==='‚àí') current=(a-b).toString(); if(op==='√ó') current=(a*b).toString(); if(op==='√∑') current=b!==0?(a/b).toString():'ERR'; } } op=null; prev=''; reset=true; display.textContent=current.slice(0,12); }
                else if(['+','‚àí','√ó','√∑'].includes(txt)) { if(op&&!reset) { const a=parseFloat(prev), b=parseFloat(current); if(!isNaN(a)&&!isNaN(b)) { if(op==='+') current=(a+b).toString(); if(op==='‚àí') current=(a-b).toString(); if(op==='√ó') current=(a*b).toString(); if(op==='√∑') current=b!==0?(a/b).toString():'ERR'; } } prev=current; op=txt; reset=true; display.textContent=current.slice(0,12); }
            }); });
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –¢–ï–†–ú–ò–ù–ê–õ ==========
        function createTerminalApp() {
            closeCurrentApp();
            const win = document.createElement('div'); win.className = 'neon-app'; win.style.width = '500px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg><h2>–¢–µ—Ä–º–∏–Ω–∞–ª</h2></div>
                <div class="app-content" style="font-family:monospace;">‚ùØ neon@os:~$ ls *.app<br>${neonFileSystem.filter(f=>f.type==='app').map(f=>f.name).join('<br>')||'No .app files'}<br>‚ùØ _</div>
            `;
            document.body.appendChild(win);
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –¢–ê–ô–ú–ï–† ==========
        function createTimerApp() {
            closeCurrentApp();
            const win = document.createElement('div'); win.className = 'neon-app'; win.style.width = '400px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 6v6l4 2m-4-10.5a9 9 0 1 0 0 18 9 9 0 0 0 0-18Z"/></svg><h2>–¢–∞–π–º–µ—Ä</h2></div>
                <div class="app-content" style="text-align:center;">
                    <div id="timerDisplay" style="font-size:3.5rem; font-family:monospace; margin-bottom:20px;">05:00</div>
                    <div style="display:flex; gap:16px; justify-content:center;"><button id="timerStartBtn" style="background:hsl(var(--hue1),70%,60%); border:none; padding:0.7em 2em; border-radius:30px; color:white;">–°—Ç–∞—Ä—Ç</button><button id="timerResetBtn" style="background:rgba(255,255,255,0.2); border:none; padding:0.7em 2em; border-radius:30px; color:white;">–°–±—Ä–æ—Å</button></div>
                </div>
            `;
            document.body.appendChild(win);
            let timerInterval, timeLeft=300; const display = win.querySelector('#timerDisplay');
            win.querySelector('#timerStartBtn').addEventListener('click', function() {
                if(timerInterval) { clearInterval(timerInterval); timerInterval=null; this.textContent='–°—Ç–∞—Ä—Ç'; }
                else { timerInterval=setInterval(()=>{ if(timeLeft>0) { timeLeft--; const m=Math.floor(timeLeft/60), s=timeLeft%60; display.textContent=`${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`; } },1000); this.textContent='–ü–∞—É–∑–∞'; }
            });
            win.querySelector('#timerResetBtn').addEventListener('click', () => { timeLeft=300; display.textContent='05:00'; if(timerInterval) { clearInterval(timerInterval); timerInterval=null; win.querySelector('#timerStartBtn').textContent='–°—Ç–∞—Ä—Ç'; } });
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ü–û–ì–û–î–ê - –í–°–ï –ì–û–†–û–î–ê –†–û–°–°–ò–ò ==========
        async function fetchWeather(city) {
            try {
                const res = await fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)},–†–æ—Å—Å–∏—è&lang=ru`);
                if (!res.ok) return null;
                const data = await res.json();
                return {
                    temp: Math.round(data.current.temp_c),
                    feels: Math.round(data.current.feelslike_c),
                    condition: data.current.condition.text,
                    wind: data.current.wind_kph,
                    humidity: data.current.humidity,
                    icon: data.current.condition.icon
                };
            } catch { return null; }
        }

        function createWeatherApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.style.width = '800px';
            win.style.maxWidth = '95vw';
            
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/>
                    </svg>
                    <h2>–ü–æ–≥–æ–¥–∞ ¬∑ 107 –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏</h2>
                </div>
                <div class="app-content">
                    <div class="weather-grid" id="weatherCityGrid"></div>
                    <div id="weatherResult" class="weather-display">
                        <div style="padding: 20px; opacity: 0.8;">üå§ –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–≥–æ–¥—ã</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(win);
            
            const grid = win.querySelector('#weatherCityGrid');
            const resultDiv = win.querySelector('#weatherResult');
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
            ALL_RUSSIAN_CITIES.forEach(city => {
                const btn = document.createElement('button');
                btn.className = 'weather-city-btn';
                btn.textContent = city;
                btn.addEventListener('click', async () => {
                    // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
                    grid.querySelectorAll('.weather-city-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                    resultDiv.innerHTML = `<div style="padding: 20px;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –¥–ª—è ${city}...</div>`;
                    
                    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–≥–æ–¥—É
                    const weather = await fetchWeather(city);
                    
                    if (weather) {
                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∫–æ–Ω–∫—É –ø–æ —É—Å–ª–æ–≤–∏—é
                        let icon = '‚òÅÔ∏è';
                        if (weather.condition.includes('—Å–æ–ª–Ω–µ—á') || weather.condition.includes('—è—Å–Ω–æ')) icon = '‚òÄÔ∏è';
                        else if (weather.condition.includes('–¥–æ–∂–¥')) icon = 'üåß';
                        else if (weather.condition.includes('—Å–Ω–µ–≥')) icon = '‚ùÑÔ∏è';
                        else if (weather.condition.includes('–≥—Ä–æ–∑')) icon = '‚õà';
                        else if (weather.condition.includes('—Ç—É–º–∞–Ω')) icon = 'üå´';
                        else if (weather.condition.includes('–ø–∞—Å–º—É—Ä')) icon = '‚òÅÔ∏è';
                        else if (weather.condition.includes('–æ–±–ª–∞—á')) icon = '‚õÖ';
                        
                        resultDiv.innerHTML = `
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 1.8rem; font-weight: 600;">${city}</span>
                                    <span style="font-size: 3rem;">${icon}</span>
                                </div>
                                <div class="weather-temp">${weather.temp}¬∞C</div>
                                <div class="weather-condition">${weather.condition}</div>
                                <div class="weather-details">
                                    <span>üå° –û—â—É—â–∞–µ—Ç—Å—è: ${weather.feels}¬∞C</span>
                                    <span>üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: ${weather.humidity}%</span>
                                    <span>üå¨ –í–µ—Ç–µ—Ä: ${weather.wind} –∫–º/—á</span>
                                </div>
                                <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 8px;">
                                    –î–∞–Ω–Ω—ã–µ: WeatherAPI.com ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–µ–π—á–∞—Å
                                </div>
                            </div>
                        `;
                    } else {
                        resultDiv.innerHTML = `
                            <div style="padding: 20px; color: #ff9999;">
                                ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è ${city}<br>
                                <span style="font-size: 0.8rem; opacity: 0.7;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API-–∫–ª—é—á –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</span>
                            </div>
                        `;
                    }
                });
                
                grid.appendChild(btn);
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –û–ë–û–ò ==========
        const wallpapers = [
            { name: "Abstract Neon", url: "https://assets.codepen.io/13471/abstract-light.jpg", preview: "https://assets.codepen.io/13471/abstract-light.jpg", overlay: "linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%))" }
        ];

        function showNotification(text, duration = 2000) {
            const notif = document.createElement('div'); notif.className = 'neon-notification'; notif.textContent = text;
            document.body.appendChild(notif); setTimeout(() => notif.remove(), duration);
        }

        function setWallpaper(url, overlay) {
            document.documentElement.style.setProperty('--wallpaper', `url('${url}')`);
            document.documentElement.style.setProperty('--wallpaper-overlay', overlay);
        }

        function initWallpaperGrid() {
            const grid = document.getElementById('wallpaperGrid'); if (!grid) return;
            grid.innerHTML = '';
            wallpapers.forEach((wp, i) => {
                const item = document.createElement('div'); item.className = 'wallpaper-item'; item.style.backgroundImage = `url('${wp.preview}')`;
                item.dataset.url = wp.url; item.dataset.overlay = wp.overlay; item.title = wp.name;
                item.classList.add('active');
                item.addEventListener('click', () => {
                    document.querySelectorAll('.wallpaper-item').forEach(el => el.classList.remove('active'));
                    item.classList.add('active'); setWallpaper(wp.url, wp.overlay);
                    localStorage.setItem('neon-wallpaper-url', wp.url);
                });
                grid.appendChild(item);
            });
        }

        function loadSavedWallpaper() {
            const url = localStorage.getItem('neon-wallpaper-url');
            if (url) setWallpaper(url, wallpapers[0].overlay);
            else setWallpaper(wallpapers[0].url, wallpapers[0].overlay);
        }

        // ========== –°–ò–°–¢–ï–ú–ê ==========
        function closeCurrentApp() {
            const existing = document.querySelector('.neon-app');
            if (existing) existing.remove();
        }

        // ---------- –ú–ï–ù–Æ ----------
        document.addEventListener("contextmenu", (e) => {
            e.preventDefault();
            const menuBox = $menu.getBoundingClientRect();
            let x = e.clientX, y = e.clientY;
            if (x + menuBox.width > window.innerWidth - 20) x = window.innerWidth - menuBox.width - 20;
            if (y + menuBox.height > window.innerHeight - 20) y = window.innerHeight - menuBox.height - 20;
            if (!$menu.contains(e.target)) { $menu.style.left = x + 'px'; $menu.style.top = y + 'px'; $menu.classList.add('open'); }
        });

        $openWallpaperBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const rect = $openWallpaperBtn.getBoundingClientRect();
            $menu.style.left = (rect.left - 20) + 'px'; $menu.style.top = (rect.top - 300) + 'px'; $menu.classList.add('open');
        });

        document.addEventListener('pointerdown', (e) => {
            if (!$menu.contains(e.target) && !e.target.matches('input[type="range"]') && e.target !== $openWallpaperBtn) $menu.classList.remove('open');
        });

        // ---------- –¶–í–ï–¢–ê ----------
        $hue1.addEventListener('input', (e) => document.body.style.setProperty('--hue1', e.target.value));
        $hue2.addEventListener('input', (e) => document.body.style.setProperty('--hue2', e.target.value));

        const setHues = () => {
            const v1 = localStorage.getItem('neon-glass-hue1') ?? 255;
            const v2 = localStorage.getItem('neon-glass-hue2') ?? 222;
            $hue1.value = v1; $hue2.value = v2;
            document.body.style.setProperty('--hue1', v1); document.body.style.setProperty('--hue2', v2);
        };
        setHues();
        
        $rand.addEventListener('click', () => {
            const r1 = Math.floor(Math.random() * 360); const r2 = Math.floor(Math.random() * 360);
            $hue1.value = r1; $hue2.value = r2;
            document.body.style.setProperty('--hue1', r1); document.body.style.setProperty('--hue2', r2);
            localStorage.setItem('neon-glass-hue1', r1); localStorage.setItem('neon-glass-hue2', r2);
            showNotification('üé® –¢–µ–º–∞ —Å–ª—É—á–∞–π–Ω–∞—è!');
        });

        window.addEventListener('keydown', (e) => { 
            if (e.key === 'Escape') {
                $menu.classList.remove('open');
                const app = document.querySelector('.neon-app'); 
                if (app) app.remove(); 
            } 
        });

        // ---------- –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–ô ----------
        const appLauncher = {
            snake: () => createSnakeGame(15), snake2: () => createSnakeGame(12),
            browser: createNeonBrowser, files: createFileManager,
            weather: createWeatherApp, calculator: createCalculator,
            terminal: createTerminalApp, timer: createTimerApp
        };

        $menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const appId = item.dataset.app;
                if (appId && appLauncher[appId]) {
                    appLauncher[appId]();
                    $menu.classList.remove('open');
                    showNotification(`‚ú® ${item.textContent.trim()}`, 1000);
                }
            });
        });

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
        initWallpaperGrid();
        loadSavedWallpaper();
        saveFileSystem();
    })();
</script>
</body>
</html>
