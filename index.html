<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    <title>Neon Glass OS ¬∑ –ü–æ–≥–æ–¥–∞ –†–æ—Å—Å–∏–∏ + –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–±–æ–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Asap:wght@300;400;500;600;700&family=Amaranth:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- ROOT & RESET --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --hue1: 255;
            --hue2: 222;
            --border: 1px;
            --border-color: hsl(var(--hue2), 12%, 20%);
            --radius: 22px;
            --ease: cubic-bezier(0.5, 1, 0.89, 1);
            --glass-bg: linear-gradient(235deg, hsl(var(--hue1) 50% 10% / 0.8), hsl(var(--hue1) 50% 10% / 0) 33%), 
                        linear-gradient(45deg , hsl(var(--hue2) 50% 10% / 0.8), hsl(var(--hue2) 50% 10% / 0) 33%), 
                        linear-gradient(hsl(220deg 25% 4.8% / 0.9));
            --font-mono: 'JetBrains Mono', 'Courier New', monospace;
            --wallpaper: url('https://assets.codepen.io/13471/abstract-light.jpg');
            --wallpaper-overlay: linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%));
        }

        body {
            background: #08090d;
            /* –í–ê–ñ–ù–û: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ var() */
            background-image: var(--wallpaper), var(--wallpaper-overlay);
            background-size: cover;
            background-position: center;
            background-blend-mode: hard-light;
            color: #e0e5ee;
            font-family: 'Asap', sans-serif;
            min-height: 100vh;
            padding: 0;
            transition: background-image 0.4s var(--ease), background-color 0.2s ease;
        }

        #app {
            min-height: 100svh;
            padding: 2svw;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* --- HEADER / FOOTER --- */
        #app > header {
            display: flex;
            gap: 0.5em;
            flex-direction: column;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(8px);
            padding: 1.5em 2em;
            border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1);
            max-width: 650px;
        }
        #app > header h1 {
            margin: 0;
            color: color-mix(in oklab, #fff 70%, hsl(var(--hue1) 50% 50%));
            font-size: 2rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-shadow: 0 0 12px hsl(var(--hue1) 70% 60% / 0.5);
        }
        #app > header p {
            color: color-mix(in oklab, #fff 40%, hsl(var(--hue2) 50% 50%));
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        #app > footer {
            align-self: end;
            max-width: calc(96svw - 200px);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5em;
            background: rgba(0,0,0,0.25);
            backdrop-filter: blur(8px);
            padding: 1em 2em;
            border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1);
        }
        #app > footer h2 {
            width: 100%;
            font-size: 1em;
            font-weight: 400;
            color: rgba(255,255,255,0.8);
        }
        footer h2 button {
            font-family: Amaranth, sans-serif;
            font-style: italic;
            text-transform: none;
            display: inline-flex;
            padding: 0.25em 0.8em;
            margin-inline: 0.33em;
            background: rgba(255,255,255,0.12);
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 3em;
            color: white;
            cursor: pointer;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        #app > footer [type=range] {
            width: 200px;
            margin: 0 8px 0 0;
            accent-color: hsl(var(--hue2) 66% 60%);
        }

        .wallpaper-btn {
            background: rgba(20,30,50,0.6);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.4em 1.2em;
            border-radius: 30px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: 0.2s;
            backdrop-filter: blur(4px);
        }
        .wallpaper-btn:hover {
            background: rgba(60,80,120,0.7);
            border-color: rgba(255,255,255,0.5);
        }
        .wallpaper-btn svg {
            width: 16px;
            height: 16px;
        }

        /* --- –ö–û–ù–¢–ï–ö–°–¢–ù–û–ï –ú–ï–ù–Æ --- */
        #menu {
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
            transition: visibility 0s 0.5s, opacity 0.25s var(--ease), filter 0.25s var(--ease);
            filter: blur(4px);
            font-family: 'Asap', sans-serif;
            color: #b3bbcc;
            position: fixed;
            top: 140px;
            left: 2svw;
            min-width: 260px;
            max-width: 300px;
            border-radius: var(--radius);
            border: var(--border) solid var(--border-color);
            padding: 0.9em;
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            box-shadow: hsl(var(--hue2) 50% 2%) 0px 12px 28px -10px, 
                        hsl(var(--hue2) 50% 4%) 0px 24px 48px -16px,
                        0 0 0 1px hsl(var(--hue1) 60% 60% / 0.1) inset;
            z-index: 10000;
        }

        #menu.open {
            visibility: visible;
            opacity: 1;
            pointer-events: auto;
            transition-delay: 0s;
            filter: blur(0px);
        }

        /* --- –°–∏—è–Ω–∏–µ –∏ –≥–ª–æ—É —ç—Ñ—Ñ–µ–∫—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç hue –∏–∑ —Ç–µ–º—ã!) --- */
        #menu .shine, #menu .glow { --hue: var(--hue1); }
        #menu .shine-bottom, #menu .glow-bottom { --hue: var(--hue2); --conic: 135deg; }
        #menu .shine, #menu .shine::before, #menu .shine::after {
            pointer-events: none; border-radius: 0; border-top-right-radius: inherit; border-bottom-left-radius: inherit;
            border: 1px solid transparent; width: 70%; aspect-ratio: 1; position: absolute; right: calc(var(--border) * -1);
            top: calc(var(--border) * -1); z-index: 1; --start: 12%;
            background: conic-gradient(from var(--conic, -45deg) at center in oklch, transparent var(--start,0%),
                      hsl( var(--hue), var(--sat,80%), var(--lit,60%)), transparent  var(--end,50%) ) border-box;
            mask: linear-gradient(transparent), linear-gradient(black); mask-clip: padding-box, border-box; mask-composite: subtract;
        }
        #menu .shine::after { --start: 17%; --end: 33%; }
        #menu .glow { mask-size: 40%; filter: blur(8px) brightness(0.6); }

        #menu .inner { 
            display: flex; 
            flex-direction: column; 
            gap: 0.4em; 
            font-size: 0.8rem; 
        }
        
        #menu section { 
            display: flex; 
            flex-direction: column; 
            gap: 0.2em; 
        }
        
        #menu li {
            --item-hue: var(--hue2); 
            position: relative; 
            padding: 0.45em 0.7em;
            min-height: 32px;
            display: flex; 
            align-items: center; 
            gap: 0.6em; 
            border-radius: 12px;
            border: 1px solid transparent; 
            transition: all 0.2s ease;
            background: linear-gradient(90deg in oklch, hsl(var(--item-hue) 29% 13% / var(--item-opacity,0)),
                      hsl(var(--item-hue) 30% 15% / var(--item-opacity,0)) 24% 32%, transparent 95%) border-box;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        #menu li svg {
            width: 16px;
            height: 16px;
            stroke-width: 1.5;
            flex-shrink: 0;
        }
        
        #menu li:hover { 
            --item-opacity: 0.55; 
            color: white; 
        }

        .wallpaper-section {
            margin-top: 0.3em;
            border-top: 0.5px solid rgba(255,255,255,0.1);
            padding-top: 0.5em;
        }
        
        .wallpaper-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-top: 6px;
        }
        
        .wallpaper-item {
            aspect-ratio: 16/9;
            border-radius: 8px;
            border: 1.5px solid transparent;
            cursor: pointer;
            transition: 0.2s;
            background-size: cover;
            background-position: center;
        }
        
        .wallpaper-item.active {
            border-color: white;
            box-shadow: 0 0 12px hsl(var(--hue1) 80% 70%);
        }

        /* --- –ù–ï–û–ù–û–í–´–ï –û–ö–ù–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–ô --- */
        .neon-app {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 440px;
            max-width: 92vw;
            background: linear-gradient(145deg, hsl(var(--hue1) 40% 12% / 0.95), hsl(var(--hue2) 40% 8% / 0.95));
            backdrop-filter: blur(24px);
            border: 1px solid hsl(var(--hue1) 60% 60% / 0.5);
            border-radius: 28px;
            padding: 1.5em 1.5em 1.8em;
            box-shadow: 0 20px 48px -12px black, 0 0 0 1px hsl(var(--hue1) 70% 70% / 0.2) inset,
                        0 0 48px hsl(var(--hue1) 70% 60% / 0.2);
            color: white;
            z-index: 20000;
            opacity: 0;
            animation: neonAppear 0.3s var(--ease) forwards;
        }

        @keyframes neonAppear {
            0% { opacity: 0; transform: translate(-50%, -44%) scale(0.96); filter: blur(4px); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: blur(0px); }
        }

        .neon-app .app-header {
            display: flex; 
            align-items: center; 
            gap: 10px; 
            margin-bottom: 1.4em;
            border-bottom: 1px solid hsl(var(--hue2) 60% 70% / 0.3); 
            padding-bottom: 0.6em;
        }
        
        .neon-app .app-header svg { 
            width: 26px;
            height: 26px; 
            stroke: hsl(var(--hue1) 80% 80%); 
        }
        
        .neon-app .app-header h2 {
            font-size: 1.6rem; 
            font-weight: 500; 
            font-family: 'Amaranth', sans-serif; 
            font-style: italic;
            text-shadow: 0 0 10px hsl(var(--hue1) 80% 70% / 0.6); 
            margin: 0; 
        }
        
        .neon-app .app-content {
            font-size: 0.95rem; 
            line-height: 1.5; 
            color: rgba(255,255,255,0.95);
            min-height: 160px; 
            background: rgba(0,0,0,0.2); 
            border-radius: 20px; 
            padding: 1.2em;
            border: 0.5px solid rgba(255,255,255,0.1); 
        }

        .neon-app .app-close {
            position: absolute; 
            top: 14px; 
            right: 18px; 
            background: transparent; 
            border: none;
            color: rgba(255,255,255,0.6); 
            font-size: 24px; 
            cursor: pointer; 
            padding: 0 8px;
            border-radius: 30px; 
            line-height: 1;
            transition: 0.2s;
        }
        .neon-app .app-close:hover {
            background: rgba(255,255,255,0.15);
            color: white;
        }

        /* ===== –ü–û–ì–û–î–ê –° WEATHERAPI.COM ===== */
        .weather-app .city-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
            max-height: 140px;
            overflow-y: auto;
            padding-right: 4px;
        }
        
        .weather-app .city-btn {
            background: rgba(30,40,70,0.6);
            border: 1px solid rgba(255,255,255,0.15);
            color: rgba(255,255,255,0.9);
            padding: 0.5em 1em;
            border-radius: 30px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.15s;
            backdrop-filter: blur(4px);
            flex: 0 0 auto;
        }
        
        .weather-app .city-btn:hover {
            background: rgba(60,80,140,0.7);
            border-color: rgba(255,255,255,0.4);
        }
        
        .weather-app .city-btn.active {
            background: hsl(var(--hue1) 60% 50% / 0.7);
            border-color: white;
            box-shadow: 0 0 12px hsl(var(--hue1) 70% 60% / 0.5);
        }

        .weather-app .weather-card {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .weather-app .weather-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .weather-app .weather-temp {
            font-size: 3.2rem;
            font-weight: 300;
            font-family: var(--font-mono);
            line-height: 1;
        }
        
        .weather-app .weather-icon {
            font-size: 2.8rem;
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        .weather-app .weather-desc {
            font-size: 1.1rem;
            opacity: 0.95;
            text-transform: capitalize;
        }
        
        .weather-app .weather-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            background: rgba(0,0,0,0.25);
            border-radius: 18px;
            padding: 1em;
            margin-top: 8px;
        }
        
        .weather-app .weather-detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weather-app .weather-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 4px;
            color: rgba(255,255,255,0.7);
            font-size: 0.8rem;
        }
        
        .weather-app .weather-update-btn {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 30px;
            padding: 0.3em 1em;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .neon-notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            color: white;
            padding: 0.6em 1.5em;
            border-radius: 40px;
            border: 1px solid hsl(var(--hue1) 70% 70% / 0.5);
            font-size: 0.9rem;
            z-index: 30000;
            animation: notifFade 2s ease forwards;
            box-shadow: 0 0 20px hsl(var(--hue1) 70% 60% / 0.3);
        }
        @keyframes notifFade {
            0% { opacity: 0; transform: translateX(-50%) translateY(10px); }
            15% { opacity: 1; transform: translateX(-50%) translateY(0); }
            85% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }

        .social-icon { 
            position: fixed; 
            bottom: 16px; 
            right: 16px; 
            z-index: 9999; 
            background: rgba(0,0,0,0.35); 
            backdrop-filter: blur(8px); 
            padding: 0.4em 1em; 
            border-radius: 30px; 
            border: 0.5px solid rgba(255,255,255,0.2); 
            color: #ccc; 
            text-decoration: none; 
            display: flex; 
            gap: 5px; 
            align-items: center; 
            font-size: 0.8rem; 
        }
        .social-icon svg { width: 18px; height: 18px; fill: currentColor; }
        .social-icon.codepen { right: auto; left: 16px; }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ --- */
        .calc-btn {
            background: rgba(20,25,40,0.7); 
            padding: 0.7em; 
            border-radius: 16px; 
            text-align: center; 
            cursor: pointer;
            transition: 0.1s;
        }
        .calc-btn:hover {
            background: rgba(60,80,120,0.8);
        }
        .calc-display {
            background: rgba(0,0,0,0.5); 
            padding: 0.5em; 
            border-radius: 14px; 
            text-align: right; 
            font-size: 1.8rem;
            font-family: var(--font-mono);
            margin-bottom: 12px;
        }
    </style>
</head>
<body>

<main id="app">
    <header>
        <h1>‚ö° Neon Glass OS</h1>
        <p>
            –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ¬∑ –ü–æ–≥–æ–¥–∞ –†–æ—Å—Å–∏–∏ + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–±–æ–∏
            <span class="wallpaper-btn" id="openWallpaperMenu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/>
                </svg>
                –û–±–æ–∏
            </span>
        </p>
    </header>
    <footer class="dark">
        <h2>üé® –¢–µ–º–∞ ¬∑ <button class='random' id="randomBtn">randomize</button></h2>
        <input type="range" id="h1" min="0" max="360" value="255">
        <input type="range" id="h2" min="0" max="360" value="222">
    </footer>
</main>

<aside id="menu" class="open dark">
    <span class="shine shine-top"></span>
    <span class="shine shine-bottom"></span>
    <span class="glow glow-top"></span>
    <span class="glow glow-bottom"></span>
    <span class="glow glow-bright glow-top"></span>
    <span class="glow glow-bright glow-bottom"></span>
    <div class="inner">
        <section>
            <header style="font-size:0.7rem; opacity:0.8;">‚ú® –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</header>
            <ul>
                <li data-app="calculator" class="selected">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"/></svg>
                    –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
                </li>
                <li data-app="notes">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h4.5m-5.273-9.955a3.75 3.75 0 0 1 5.304 0l6.19 6.19a3.75 3.75 0 0 1 0 5.304l-4.095 4.095a3.75 3.75 0 0 1-5.304 0l-6.19-6.19a3.75 3.75 0 0 1 0-5.304l1.095-1.095Z"/></svg>
                    –ó–∞–º–µ—Ç–∫–∏
                </li>
                <li data-app="weather">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg>
                    –ü–æ–≥–æ–¥–∞ (–†–æ—Å—Å–∏—è)
                </li>
                <li data-app="music">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a2.25 2.25 0 0 1-2.673-1.632l-.377-1.32a2.25 2.25 0 0 1 1.632-2.673L19.5 9.553Z"/></svg>
                    –ú—É–∑—ã–∫–∞
                </li>
                <li data-app="terminal">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg>
                    –¢–µ—Ä–º–∏–Ω–∞–ª
                </li>
                <li data-app="timer">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6v6l4 2m-4-10.5a9 9 0 1 0 0 18 9 9 0 0 0 0-18Z"/></svg>
                    –¢–∞–π–º–µ—Ä
                </li>
            </ul>
        </section>

        <section class="wallpaper-section">
            <header style="font-size:0.7rem; opacity:0.8; display:flex; align-items:center; gap:4px;">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor">
                    <path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/>
                </svg>
                –û–±–æ–∏
            </header>
            <div class="wallpaper-grid" id="wallpaperGrid"></div>
        </section>
    </div>
</aside>

<a class="social-icon codepen" href="https://codepen.io/simeydotme">üì± Simey</a>
<a class="social-icon twitter" href="https://twitter.com/simeydotme">
    <svg viewBox="0 0 24 24"><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737s-2.643 2.06-2.62 3.737v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84 0 0 0 .497-3.753c-.002-.249 1.51-2.772 1.818-4.013z"/></svg>
</a>
<a class="social-icon github" href="https://github.com/simeydotme">
    <svg viewBox="0 0 24 24"><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2 4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0c-2.4-1.6-3.5-1.3-3.5-1.3a4.2 4.2 0 0 0-.1 3.2 4.6 4.6 0 0 0-1.3 3.2c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2v3.5"/></svg>
</a>

<script>
    (function(){
        "use strict";

        // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
        const $menu = document.getElementById('menu');
        const $menuItems = $menu.querySelectorAll('li');
        const $hue1 = document.getElementById('h1');
        const $hue2 = document.getElementById('h2');
        const $rand = document.getElementById('randomBtn');
        const $openWallpaperBtn = document.getElementById('openWallpaperMenu');
        let cleanTimer;

        // ========== –í–ê–® API –ö–õ–Æ–ß WEATHERAPI.COM ==========
        // üîë –ö–ª—é—á —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∏—á–µ–≥–æ –≤–≤–æ–¥–∏—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.
        const WEATHER_API_KEY = "181ac29b75bb4115a86191537261102";
        
        // –ì–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞
        const RUSSIAN_CITIES = [
            "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", 
            "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ö–∞–∑–∞–Ω—å", "–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥", "–ß–µ–ª—è–±–∏–Ω—Å–∫",
            "–°–∞–º–∞—Ä–∞", "–û–º—Å–∫", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É", "–£—Ñ–∞", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫",
            "–í–æ—Ä–æ–Ω–µ–∂", "–ü–µ—Ä–º—å", "–í–æ–ª–≥–æ–≥—Ä–∞–¥", "–°–æ—á–∏", "–°–∞—Ä–∞—Ç–æ–≤",
            "–¢—é–º–µ–Ω—å", "–¢–æ–ª—å—è—Ç—Ç–∏", "–ò–∂–µ–≤—Å–∫", "–ë–∞—Ä–Ω–∞—É–ª", "–ò—Ä–∫—É—Ç—Å–∫",
            "–•–∞–±–∞—Ä–æ–≤—Å–∫", "–Ø—Ä–æ—Å–ª–∞–≤–ª—å", "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–ú–∞—Ö–∞—á–∫–∞–ª–∞"
        ].sort();

        // ---------- –û–ë–û–ò ----------
        const wallpapers = [
            { 
                name: "Abstract Neon", 
                url: "https://assets.codepen.io/13471/abstract-light.jpg", 
                preview: "https://assets.codepen.io/13471/abstract-light.jpg", 
                // –í–ê–ñ–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ —Ç–µ–º—ã!
                overlay: "linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%))"
            },
            { 
                name: "Cyber Grid", 
                url: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(45deg, hsl(var(--hue1) 70% 60% / 0.2), hsl(var(--hue2) 70% 60% / 0.2))" 
            },
            { 
                name: "Neon City", 
                url: "https://images.unsplash.com/photo-1519608487953-e17c5135a08e?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1519608487953-e17c5135a08e?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(135deg, hsl(var(--hue1) 70% 60% / 0.3), hsl(var(--hue2) 70% 60% / 0.3))" 
            },
            { 
                name: "Purple Storm", 
                url: "https://images.unsplash.com/photo-1534274988757-a28bf1a57c17?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1534274988757-a28bf1a57c17?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(to bottom, hsl(var(--hue1) 70% 60% / 0.3), rgba(0,0,0,0.5))" 
            },
            { 
                name: "Blue Abyss", 
                url: "https://images.unsplash.com/photo-1518834107812-67b0b7c58434?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1518834107812-67b0b7c58434?w=100&h=60&fit=crop", 
                overlay: "radial-gradient(circle, hsl(var(--hue1) 70% 60% / 0.3), rgba(0,0,0,0.7))" 
            },
            { 
                name: "Synthwave", 
                url: "https://images.unsplash.com/photo-1503435980610-a51f3ddfee50?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1503435980610-a51f3ddfee50?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(90deg, hsl(var(--hue1) 70% 60% / 0.4), hsl(var(--hue2) 70% 60% / 0.4))" 
            },
            { 
                name: "Dark Matter", 
                url: "https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(to right, hsl(var(--hue1) 30% 20% / 0.8), hsl(var(--hue2) 30% 20% / 0.8))" 
            },
            { 
                name: "Crystal", 
                url: "https://images.unsplash.com/photo-1518070462831-33d1e0a3cba0?w=500&auto=format", 
                preview: "https://images.unsplash.com/photo-1518070462831-33d1e0a3cba0?w=100&h=60&fit=crop", 
                overlay: "linear-gradient(45deg, hsl(var(--hue1) 80% 70% / 0.2), hsl(var(--hue2) 80% 70% / 0.2))" 
            }
        ];

        // ---------- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ----------
        function showNotification(text) {
            const notif = document.createElement('div');
            notif.className = 'neon-notification';
            notif.textContent = text;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 2000);
        }

        // ---------- –§–£–ù–ö–¶–ò–Ø –°–ú–ï–ù–´ –û–ë–û–ï–í ----------
        function setWallpaper(url, overlay) {
            document.documentElement.style.setProperty('--wallpaper', `url('${url}')`);
            // –í–ê–ñ–ù–û: overlay —Å–æ–¥–µ—Ä–∂–∏—Ç var(--hue1) –∏ var(--hue2), –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ–ª–∑—É–Ω–∫–∞–º–∏!
            document.documentElement.style.setProperty('--wallpaper-overlay', overlay);
        }

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ï–¢–ö–ò –û–ë–û–ï–í ----------
        function initWallpaperGrid() {
            const $wallpaperGrid = document.getElementById('wallpaperGrid');
            $wallpaperGrid.innerHTML = '';
            wallpapers.forEach((wp, index) => {
                const item = document.createElement('div');
                item.className = 'wallpaper-item';
                item.style.backgroundImage = `url('${wp.preview}')`;
                item.dataset.index = index;
                item.dataset.url = wp.url;
                item.dataset.overlay = wp.overlay;
                item.title = wp.name;
                
                const currentWallpaper = localStorage.getItem('neon-wallpaper-url') || wallpapers[0].url;
                if (wp.url === currentWallpaper) item.classList.add('active');
                
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    document.querySelectorAll('.wallpaper-item').forEach(el => el.classList.remove('active'));
                    item.classList.add('active');
                    setWallpaper(wp.url, wp.overlay);
                    localStorage.setItem('neon-wallpaper-url', wp.url);
                    localStorage.setItem('neon-wallpaper-overlay', wp.overlay);
                    showNotification(`üé® –û–±–æ–∏: ${wp.name}`);
                });
                $wallpaperGrid.appendChild(item);
            });
        }

        // ---------- –ó–ê–ì–†–£–ó–ö–ê –°–û–•–†–ê–ù–ï–ù–ù–´–• –û–ë–û–ï–í ----------
        function loadSavedWallpaper() {
            const savedUrl = localStorage.getItem('neon-wallpaper-url');
            const savedOverlay = localStorage.getItem('neon-wallpaper-overlay');
            if (savedUrl) {
                setWallpaper(savedUrl, savedOverlay);
            } else {
                setWallpaper(wallpapers[0].url, wallpapers[0].overlay);
            }
        }

        // ---------- –ü–û–õ–û–ñ–ï–ù–ò–ï –ú–ï–ù–Æ ----------
        document.addEventListener("contextmenu", (e) => {
            const menuBox = $menu.getBoundingClientRect();
            const win = { width: window.innerWidth, height: window.innerHeight };
            let pos = { x: e.clientX, y: e.clientY };
            const pad = { x: 20, y: 20 };
            if (pos.x + menuBox.width >= win.width - pad.x) pos.x = win.width - menuBox.width - pad.x;
            if (pos.y + menuBox.height >= win.height - pad.y) pos.y = win.height - menuBox.height - pad.y;
            if (!$menu.contains(e.target)) {
                $menu.style.left = pos.x + 'px';
                $menu.style.top = pos.y + 'px';
                $menu.classList.add('open');
                clearTimeout(cleanTimer);
            }
            e.preventDefault();
        });

        $openWallpaperBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const btnRect = $openWallpaperBtn.getBoundingClientRect();
            $menu.style.left = (btnRect.left - 20) + 'px';
            $menu.style.top = (btnRect.top - 320) + 'px';
            $menu.classList.add('open');
            clearTimeout(cleanTimer);
        });

        document.addEventListener('pointerdown', (e) => {
            const isMenu = $menu.contains(e.target);
            const isSlider = e.target.matches && e.target.matches('input[type="range"]');
            const isWallpaperBtn = e.target === $openWallpaperBtn || $openWallpaperBtn?.contains(e.target);
            
            if (!isMenu && !isSlider && !isWallpaperBtn) {
                $menu.classList.remove('open');
                cleanTimer = setTimeout(() => {
                    $menuItems.forEach(el => el.classList.remove('selected'));
                }, 200);
            } else if (isMenu && e.target.matches && e.target.matches('li')) {
                $menuItems.forEach(el => el.classList.remove('selected'));
                e.target.classList.add('selected');
            }
        });

        // ---------- –¶–í–ï–¢–û–í–´–ï –°–õ–ê–ô–î–ï–†–´ - –†–ï–ì–£–õ–ò–†–£–Æ–¢ –ò –û–ë–û–ò –¢–û–ñ–ï! ----------
        $hue1.addEventListener('input', (e) => {
            requestAnimationFrame(() => {
                document.body.style.setProperty('--hue1', e.target.value);
                localStorage.setItem('neon-glass-hue1', e.target.value);
                // –ù–µ –º–µ–Ω—è–µ–º –æ–±–æ–∏, –Ω–æ overlay –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            });
        });
        
        $hue2.addEventListener('input', (e) => {
            requestAnimationFrame(() => {
                document.body.style.setProperty('--hue2', e.target.value);
                localStorage.setItem('neon-glass-hue2', e.target.value);
                // –ù–µ –º–µ–Ω—è–µ–º –æ–±–æ–∏, –Ω–æ overlay –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            });
        });

        const setHues = (random = false) => {
            const r1 = 120 + Math.floor(Math.random() * 240);
            const r2 = r1 - 80 + (Math.floor(Math.random() * 60) - 30);
            const v1 = random ? r1 : (localStorage.getItem('neon-glass-hue1') ?? r1);
            const v2 = random ? r2 : (localStorage.getItem('neon-glass-hue2') ?? r2);
            $hue1.value = v1; 
            $hue2.value = v2;
            document.body.style.setProperty('--hue1', v1);
            document.body.style.setProperty('--hue2', v2);
        };
        
        setHues();
        
        $rand.addEventListener('click', () => { 
            setHues(true); 
            showNotification('üé® –¢–µ–º–∞ —Å–ª—É—á–∞–π–Ω–∞—è!'); 
        });

        window.addEventListener('keydown', (e) => { 
            if (e.key === 'Escape') {
                $menu.classList.remove('open');
                const app = document.querySelector('.neon-app'); 
                if (app) app.remove(); 
            } 
        });

        // ---------- –ó–ê–ö–†–´–¢–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ô ----------
        function closeCurrentApp() {
            const existing = document.querySelector('.neon-app');
            if (existing) existing.remove();
        }

        // ========== –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ü–û–ì–û–î–´ ==========
        async function fetchWeatherFromApi(cityName) {
            try {
                const url = `https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(cityName)}&lang=ru&aqi=no`;
                const response = await fetch(url);
                
                if (!response.ok) {
                    return { error: "fetch_error", message: `–û—à–∏–±–∫–∞ ${response.status}` };
                }
                
                const data = await response.json();
                
                const iconMap = {
                    '113': '‚òÄÔ∏è', '116': '‚õÖ', '119': '‚òÅÔ∏è', '122': '‚òÅÔ∏è', 
                    '143': 'üå´', '176': 'üå¶', '179': '‚ùÑÔ∏è', '182': '‚ùÑÔ∏è',
                    '185': '‚ùÑÔ∏è', '200': '‚õà', '227': '‚ùÑÔ∏è', '230': '‚ùÑÔ∏è',
                    '248': 'üå´', '260': 'üå´', '263': 'üåß', '266': 'üåß',
                    '281': '‚ùÑÔ∏è', '284': '‚ùÑÔ∏è', '293': 'üåß', '296': 'üåß',
                    '299': 'üåß', '302': 'üåß', '305': 'üåß', '308': 'üåß',
                    '311': '‚ùÑÔ∏è', '314': '‚ùÑÔ∏è', '317': '‚ùÑÔ∏è', '320': '‚ùÑÔ∏è',
                    '323': '‚ùÑÔ∏è', '326': '‚ùÑÔ∏è', '329': '‚ùÑÔ∏è', '332': '‚ùÑÔ∏è',
                    '335': '‚ùÑÔ∏è', '338': '‚ùÑÔ∏è', '350': '‚ùÑÔ∏è', '353': 'üåß',
                    '356': 'üåß', '359': 'üåß', '362': '‚ùÑÔ∏è', '365': '‚ùÑÔ∏è',
                    '368': '‚ùÑÔ∏è', '371': '‚ùÑÔ∏è', '374': '‚ùÑÔ∏è', '377': '‚ùÑÔ∏è',
                    '386': '‚õà', '389': '‚õà', '392': '‚õà', '395': '‚ùÑÔ∏è'
                };
                
                return {
                    success: true,
                    data: {
                        city: data.location.name,
                        temp: Math.round(data.current.temp_c),
                        feels_like: Math.round(data.current.feelslike_c),
                        humidity: data.current.humidity,
                        cloud: data.current.cloud,
                        wind_kph: data.current.wind_kph,
                        wind_dir: data.current.wind_dir,
                        pressure_mb: data.current.pressure_mb,
                        condition: data.current.condition.text,
                        icon: iconMap[data.current.condition.code.toString()] || '‚òÅÔ∏è',
                        last_updated: data.current.last_updated.split(' ')[1]
                    }
                };
            } catch (error) {
                return { error: "network_error", message: "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏" };
            }
        }

        function createWeatherApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app weather-app';
            
            let currentCity = localStorage.getItem('weather_selected_city') || '–ú–æ—Å–∫–≤–∞';
            
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/>
                    </svg>
                    <h2>–ü–æ–≥–æ–¥–∞ ¬∑ –†–æ—Å—Å–∏—è</h2>
                </div>
                <div class="app-content">
                    <div class="city-selector" id="cityButtonsContainer"></div>
                    <div id="weatherCard" class="weather-card">
                        <div style="text-align: center; padding: 20px;">
                            <span style="opacity: 0.8;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã...</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(win);
            
            const container = win.querySelector('#cityButtonsContainer');
            RUSSIAN_CITIES.forEach(city => {
                const btn = document.createElement('button');
                btn.className = `city-btn ${city === currentCity ? 'active' : ''}`;
                btn.textContent = city;
                btn.dataset.city = city;
                btn.addEventListener('click', async (e) => {
                    e.stopPropagation();
                    container.querySelectorAll('.city-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentCity = city;
                    localStorage.setItem('weather_selected_city', city);
                    await loadWeather(win, city);
                });
                container.appendChild(btn);
            });
            
            async function loadWeather(appWindow, city) {
                const card = appWindow.querySelector('#weatherCard');
                card.innerHTML = `<div style="text-align: center; padding: 20px;"><span style="opacity: 0.8;">üîç –ó–∞–ø—Ä–æ—Å –ø–æ–≥–æ–¥—ã –¥–ª—è ${city}...</span></div>`;
                
                const result = await fetchWeatherFromApi(city);
                
                if (result.error) {
                    card.innerHTML = `
                        <div style="text-align: center; padding: 20px; color: #ff9999;">
                            ‚ùå ${result.message}
                        </div>
                    `;
                    return;
                }
                
                const w = result.data;
                
                const windDirRu = {
                    'N': '‚¨ÜÔ∏è –°', 'NNE': '‚ÜóÔ∏è –°–°–í', 'NE': '‚ÜóÔ∏è –°–í', 'ENE': '‚ÜóÔ∏è –í–°–í',
                    'E': '‚û°Ô∏è –í', 'ESE': '‚ÜòÔ∏è –í–Æ–í', 'SE': '‚ÜòÔ∏è –Æ–í', 'SSE': '‚ÜòÔ∏è –Æ–Æ–í',
                    'S': '‚¨áÔ∏è –Æ', 'SSW': '‚ÜôÔ∏è –Æ–Æ–ó', 'SW': '‚ÜôÔ∏è –Æ–ó', 'WSW': '‚ÜôÔ∏è –ó–Æ–ó',
                    'W': '‚¨ÖÔ∏è –ó', 'WNW': '‚ÜñÔ∏è –ó–°–ó', 'NW': '‚ÜñÔ∏è –°–ó', 'NNW': '‚ÜñÔ∏è –°–°–ó'
                };
                
                card.innerHTML = `
                    <div class="weather-main">
                        <div>
                            <div style="font-size: 1.3rem; font-weight: 500; margin-bottom: 4px;">
                                ${w.city}, –†–æ—Å—Å–∏—è
                            </div>
                            <div class="weather-desc">${w.condition}</div>
                        </div>
                        <div class="weather-icon">${w.icon}</div>
                    </div>
                    <div style="display: flex; align-items: baseline; justify-content: space-between;">
                        <span class="weather-temp">${w.temp}¬∞C</span>
                        <span style="opacity: 0.8;">–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ ${w.feels_like}¬∞C</span>
                    </div>
                    <div class="weather-details">
                        <div class="weather-detail-item">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/></svg>
                            <span>–í–ª–∞–∂–Ω–æ—Å—Ç—å: ${w.humidity}%</span>
                        </div>
                        <div class="weather-detail-item">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><path d="M4 12h16"/></svg>
                            <span>–î–∞–≤–ª–µ–Ω–∏–µ: ${Math.round(w.pressure_mb * 0.750064)} –º–º</span>
                        </div>
                        <div class="weather-detail-item">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><path d="M12 12v-6"/><circle cx="12" cy="12" r="9"/></svg>
                            <span>–í–µ—Ç–µ—Ä: ${w.wind_kph} –∫–º/—á ${windDirRu[w.wind_dir] || w.wind_dir}</span>
                        </div>
                        <div class="weather-detail-item">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><path d="M3 12h3l3-9 3 18 3-9h3"/></svg>
                            <span>–û–±–ª–∞—á–Ω–æ—Å—Ç—å: ${w.cloud}%</span>
                        </div>
                    </div>
                    <div class="weather-footer">
                        <span>üïí –æ–±–Ω–æ–≤–ª–µ–Ω–æ: ${w.last_updated}</span>
                        <button id="refreshWeatherBtn" class="weather-update-btn">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"><path d="M1 4v6h6"/><path d="M23 20v-6h-6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
                            –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                `;
                
                const refreshBtn = card.querySelector('#refreshWeatherBtn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        loadWeather(appWindow, city);
                    });
                }
            }
            
            loadWeather(win, currentCity);
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ----------
        function createCalculator() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"/></svg>
                    <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
                </div>
                <div class="app-content">
                    <div class="calc-display">0</div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                        ${['C','√∑','√ó','‚àí',7,8,9,'+',4,5,6,'=',1,2,3,0,'.'].map(v => 
                            `<div class="calc-btn">${v}</div>`
                        ).join('')}
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            const display = win.querySelector('.calc-display');
            let current = '0', prev = '', op = null, reset = false;
            
            win.querySelectorAll('.calc-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const txt = btn.innerText;
                    
                    if (!isNaN(txt) || txt === '.') {
                        if (txt === '.' && current.includes('.')) return;
                        if (current === '0' || reset) { current = txt; reset = false; }
                        else current += txt;
                        display.innerText = current.slice(0, 12);
                    } else if (txt === 'C') {
                        current = '0'; prev = ''; op = null; reset = false;
                        display.innerText = '0';
                    } else if (txt === '=') {
                        if (op) {
                            const a = parseFloat(prev), b = parseFloat(current);
                            if (!isNaN(a) && !isNaN(b)) {
                                if (op === '+') current = (a + b).toString();
                                else if (op === '‚àí') current = (a - b).toString();
                                else if (op === '√ó') current = (a * b).toString();
                                else if (op === '√∑') current = b !== 0 ? (a / b).toString() : 'ERR';
                            }
                        }
                        op = null; prev = ''; reset = true;
                        display.innerText = current.slice(0, 12);
                    } else if (['+', '‚àí', '√ó', '√∑'].includes(txt)) {
                        if (op && !reset) {
                            const a = parseFloat(prev), b = parseFloat(current);
                            if (!isNaN(a) && !isNaN(b)) {
                                if (op === '+') current = (a + b).toString();
                                else if (op === '‚àí') current = (a - b).toString();
                                else if (op === '√ó') current = (a * b).toString();
                                else if (op === '√∑') current = b !== 0 ? (a / b).toString() : 'ERR';
                            }
                        }
                        prev = current; op = txt; reset = true;
                        display.innerText = current.slice(0, 12);
                    }
                });
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –ó–ê–ú–ï–¢–ö–ò ----------
        function createNotesApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h4.5m-5.273-9.955a3.75 3.75 0 0 1 5.304 0l6.19 6.19a3.75 3.75 0 0 1 0 5.304l-4.095 4.095a3.75 3.75 0 0 1-5.304 0l-6.19-6.19a3.75 3.75 0 0 1 0-5.304l1.095-1.095Z"/></svg>
                    <h2>–ó–∞–º–µ—Ç–∫–∏</h2>
                </div>
                <div class="app-content">
                    <div id="todoList" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; gap: 8px; padding: 0.3em;">
                            <span style="width: 18px; height: 18px; border: 1.5px solid hsl(var(--hue1),70%,70%); border-radius: 4px; cursor: pointer;" onclick="this.classList.toggle('done')"></span>
                            <span>‚ö° –ù–µ–æ–Ω–æ–≤–∞—è —Ç–µ–º–∞</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; padding: 0.3em;">
                            <span style="width: 18px; height: 18px; border: 1.5px solid hsl(var(--hue1),70%,70%); border-radius: 4px; cursor: pointer;" onclick="this.classList.toggle('done')"></span>
                            <span>üßÆ –†–∞–±–æ—á–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; padding: 0.3em;">
                            <span style="width: 18px; height: 18px; border: 1.5px solid hsl(var(--hue1),70%,70%); border-radius: 4px; cursor: pointer;" onclick="this.classList.toggle('done')"></span>
                            <span>üå§ –ü–æ–≥–æ–¥–∞ —á–µ—Ä–µ–∑ API</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <input id="newTodoInput" type="text" placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞..." style="flex: 1; background: rgba(0,0,0,0.4); border: none; border-radius: 20px; padding: 0.6em 1em; color: white;">
                        <button id="addTodoBtn" style="background: hsl(var(--hue1),70%,60%); border: none; border-radius: 20px; padding: 0 1.5em; color: white; cursor: pointer;">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            win.querySelector('#addTodoBtn').addEventListener('click', () => {
                const inp = win.querySelector('#newTodoInput');
                if (inp.value.trim()) {
                    const item = document.createElement('div');
                    item.style = 'display: flex; align-items: center; gap: 8px; padding: 0.3em;';
                    item.innerHTML = `<span style="width: 18px; height: 18px; border: 1.5px solid hsl(var(--hue1),70%,70%); border-radius: 4px; cursor: pointer;" onclick="this.classList.toggle('done')"></span><span>${inp.value}</span>`;
                    win.querySelector('#todoList').appendChild(item);
                    inp.value = '';
                }
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –ú–£–ó–´–ö–ê ----------
        function createMusicApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a2.25 2.25 0 0 1-2.673-1.632l-.377-1.32a2.25 2.25 0 0 1 1.632-2.673L19.5 9.553Z"/></svg>
                    <h2>–ú—É–∑—ã–∫–∞</h2>
                </div>
                <div class="app-content">
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px; background: rgba(0,0,0,0.3); padding: 0.8em; border-radius: 30px;">
                        <span style="background: hsl(var(--hue1),70%,60%); width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.4rem;">‚ñ∂</span>
                        <div>
                            <b>Neon Dreams</b><br>
                            <span style="opacity: 0.7;">Wave</span>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 16px; background: rgba(0,0,0,0.3); padding: 0.8em; border-radius: 30px;">
                        <span style="background: rgba(255,255,255,0.2); width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.4rem;">‚ñ∂</span>
                        <div>
                            <b>Glass City</b><br>
                            <span style="opacity: 0.7;">Synth</span>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            win.querySelectorAll('span[style*="cursor: pointer"]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    btn.textContent = btn.textContent === '‚ñ∂' ? '‚è∏' : '‚ñ∂';
                });
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –¢–ï–†–ú–ò–ù–ê–õ ----------
        function createTerminalApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg>
                    <h2>–¢–µ—Ä–º–∏–Ω–∞–ª</h2>
                </div>
                <div class="app-content" style="font-family: 'JetBrains Mono';">
                    <div style="color: #9dd0ff;">‚ùØ neon@glass:~$</div>
                    <div style="color: #a0f0aa;">‚úì –ü–æ–≥–æ–¥–∞ API –∞–∫—Ç–∏–≤–Ω–∞</div>
                    <div style="color: #9dd0ff;">‚ùØ echo \$CITY</div>
                    <div style="color: white;">${localStorage.getItem('weather_selected_city') || '–ú–æ—Å–∫–≤–∞'}</div>
                    <div style="color: #9dd0ff; margin-top: 8px;">‚ùØ echo \$THEME</div>
                    <div style="color: white;">hue1: ${$hue1.value} ¬∑ hue2: ${$hue2.value}</div>
                </div>
            `;
            document.body.appendChild(win);
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –¢–ê–ô–ú–ï–† ----------
        function createTimerApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6v6l4 2m-4-10.5a9 9 0 1 0 0 18 9 9 0 0 0 0-18Z"/></svg>
                    <h2>–¢–∞–π–º–µ—Ä</h2>
                </div>
                <div class="app-content">
                    <div style="font-size: 3rem; font-family: monospace; text-align: center; margin-bottom: 20px;" id="timerDisplay">05:00</div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button id="startTimerBtn" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer;">–°—Ç–∞—Ä—Ç</button>
                        <button id="resetTimerBtn" style="background: rgba(255,255,255,0.2); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer;">–°–±—Ä–æ—Å</button>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            let timerInterval, timeLeft = 300;
            const display = win.querySelector('#timerDisplay');
            
            win.querySelector('#startTimerBtn').addEventListener('click', function() {
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        const m = Math.floor(timeLeft / 60);
                        const s = timeLeft % 60;
                        display.innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                    } else {
                        clearInterval(timerInterval);
                    }
                }, 1000);
                this.textContent = '–ü–∞—É–∑–∞';
            });
            
            win.querySelector('#resetTimerBtn').addEventListener('click', () => {
                timeLeft = 300;
                display.innerText = '05:00';
                if (timerInterval) clearInterval(timerInterval);
                win.querySelector('#startTimerBtn').textContent = '–°—Ç–∞—Ä—Ç';
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–ô ----------
        const appLauncher = {
            calculator: createCalculator,
            notes: createNotesApp,
            weather: createWeatherApp,
            music: createMusicApp,
            terminal: createTerminalApp,
            timer: createTimerApp
        };

        $menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const appId = item.dataset.app;
                if (appId && appLauncher[appId]) {
                    appLauncher[appId]();
                    $menu.classList.remove('open');
                    showNotification(`‚ú® ${item.textContent.trim()} –∑–∞–ø—É—â–µ–Ω–æ`);
                }
            });
        });

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
        initWallpaperGrid();
        loadSavedWallpaper();
    })();
</script>
</body>
</html>
