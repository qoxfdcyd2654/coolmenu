<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=no">
    <title>Neon OS ¬∑ –ó–∞–ø—É—Å–∫ —Ñ–∞–π–ª–æ–≤, –£—Å—Ç–∞–Ω–æ–≤–∫–∞, –ò–≥—Ä—ã</title>
    <link href="https://fonts.googleapis.com/css2?family=Asap:wght@300;400;500;600;700&family=Amaranth:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono:wght@300;400;600&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- ROOT & RESET (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è) --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --hue1: 255;
            --hue2: 222;
            --border: 1px;
            --border-color: hsl(var(--hue2), 12%, 20%);
            --radius: 22px;
            --ease: cubic-bezier(0.5, 1, 0.89, 1);
            --glass-bg: linear-gradient(235deg, hsl(var(--hue1) 50% 10% / 0.8), hsl(var(--hue1) 50% 10% / 0) 33%), 
                        linear-gradient(45deg , hsl(var(--hue2) 50% 10% / 0.8), hsl(var(--hue2) 50% 10% / 0) 33%), 
                        linear-gradient(hsl(220deg 25% 4.8% / 0.9));
            --font-mono: 'JetBrains Mono', 'Courier New', monospace;
            --font-retro: 'Press Start 2P', cursive;
            --wallpaper: url('https://assets.codepen.io/13471/abstract-light.jpg');
            --wallpaper-overlay: linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%));
        }

        body {
            background: #08090d;
            background-image: var(--wallpaper), var(--wallpaper-overlay);
            background-size: cover;
            background-position: center;
            background-blend-mode: hard-light;
            color: #e0e5ee;
            font-family: 'Asap', sans-serif;
            min-height: 100vh;
            padding: 0;
            transition: background-image 0.4s var(--ease), background-color 0.2s ease;
            overflow-x: hidden;
        }

        #app {
            min-height: 100svh;
            padding: 2svw;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #app > header {
            display: flex;
            gap: 0.5em;
            flex-direction: column;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(8px);
            padding: 1.5em 2em;
            border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1);
            max-width: 750px;
        }
        #app > header h1 {
            margin: 0;
            color: color-mix(in oklab, #fff 70%, hsl(var(--hue1) 50% 50%));
            font-size: 2rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-shadow: 0 0 12px hsl(var(--hue1) 70% 60% / 0.5);
        }
        #app > header p {
            color: color-mix(in oklab, #fff 40%, hsl(var(--hue2) 50% 50%));
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        #app > footer {
            align-self: end;
            max-width: calc(96svw - 200px);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5em;
            background: rgba(0,0,0,0.25);
            backdrop-filter: blur(8px);
            padding: 1em 2em;
            border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1);
        }
        #app > footer h2 {
            width: 100%;
            font-size: 1em;
            font-weight: 400;
            color: rgba(255,255,255,0.8);
        }
        footer h2 button {
            font-family: Amaranth, sans-serif;
            font-style: italic;
            text-transform: none;
            display: inline-flex;
            padding: 0.25em 0.8em;
            margin-inline: 0.33em;
            background: rgba(255,255,255,0.12);
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 3em;
            color: white;
            cursor: pointer;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        #app > footer [type=range] {
            width: 180px;
            margin: 0 8px 0 0;
            accent-color: hsl(var(--hue2) 66% 60%);
        }

        .wallpaper-btn {
            background: rgba(20,30,50,0.6);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.4em 1.2em;
            border-radius: 30px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: 0.2s;
            backdrop-filter: blur(4px);
        }

        /* --- –ö–û–ù–¢–ï–ö–°–¢–ù–û–ï –ú–ï–ù–Æ (–û–°) --- */
        #menu {
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
            transition: visibility 0s 0.5s, opacity 0.25s var(--ease), filter 0.25s var(--ease);
            filter: blur(4px);
            font-family: 'Asap', sans-serif;
            color: #b3bbcc;
            position: fixed;
            top: 140px;
            left: 2svw;
            min-width: 290px;
            max-width: 330px;
            border-radius: var(--radius);
            border: var(--border) solid var(--border-color);
            padding: 1em;
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            box-shadow: hsl(var(--hue2) 50% 2%) 0px 12px 28px -10px, 
                        hsl(var(--hue2) 50% 4%) 0px 24px 48px -16px,
                        0 0 0 1px hsl(var(--hue1) 60% 60% / 0.1) inset;
            z-index: 10000;
            max-height: 80vh;
            overflow-y: auto;
        }

        #menu.open {
            visibility: visible;
            opacity: 1;
            pointer-events: auto;
            transition-delay: 0s;
            filter: blur(0px);
        }

        #menu .inner { 
            display: flex; 
            flex-direction: column; 
            gap: 0.6em; 
            font-size: 0.85rem; 
        }
        
        #menu section { 
            display: flex; 
            flex-direction: column; 
            gap: 0.3em; 
        }
        
        #menu hr { 
            margin: 0.2em 0; 
            opacity: 0.4; 
            border: none;
            border-top: 0.5px solid rgba(255,255,255,0.2);
        }
        
        #menu li {
            --item-hue: var(--hue2); 
            position: relative; 
            padding: 0.6em 0.8em;
            min-height: 38px;
            display: flex; 
            align-items: center; 
            gap: 0.7em; 
            border-radius: 14px;
            border: 1px solid transparent; 
            transition: all 0.2s ease;
            background: linear-gradient(90deg in oklch, hsl(var(--item-hue) 29% 13% / var(--item-opacity,0)),
                      hsl(var(--item-hue) 30% 15% / var(--item-opacity,0)) 24% 32%, transparent 95%) border-box;
            cursor: pointer;
            font-size: 0.85rem;
        }
        
        #menu li svg {
            width: 18px;
            height: 18px;
            stroke-width: 1.5;
            flex-shrink: 0;
        }
        
        #menu li:hover { 
            --item-opacity: 0.6; 
            color: white; 
        }

        .wallpaper-section {
            margin-top: 0.5em;
            border-top: 0.5px solid rgba(255,255,255,0.1);
            padding-top: 0.6em;
        }
        
        .wallpaper-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-top: 8px;
        }
        
        .wallpaper-item {
            aspect-ratio: 16/9;
            border-radius: 8px;
            border: 1.5px solid transparent;
            cursor: pointer;
            transition: 0.2s;
            background-size: cover;
            background-position: center;
        }
        
        .wallpaper-item.active {
            border-color: white;
            box-shadow: 0 0 12px hsl(var(--hue1) 80% 70%);
        }

        /* --- –ù–ï–û–ù–û–í–´–ï –û–ö–ù–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–ô --- */
        .neon-app {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 550px;
            max-width: 95vw;
            max-height: 85vh;
            overflow-y: auto;
            background: linear-gradient(145deg, hsl(var(--hue1) 40% 12% / 0.97), hsl(var(--hue2) 40% 8% / 0.97));
            backdrop-filter: blur(24px);
            border: 1px solid hsl(var(--hue1) 60% 60% / 0.5);
            border-radius: 28px;
            padding: 1.5em 1.5em 1.8em;
            box-shadow: 0 20px 48px -12px black, 0 0 0 1px hsl(var(--hue1) 70% 70% / 0.2) inset,
                        0 0 48px hsl(var(--hue1) 70% 60% / 0.2);
            color: white;
            z-index: 20000;
            opacity: 0;
            animation: neonAppear 0.3s var(--ease) forwards;
        }

        @keyframes neonAppear {
            0% { opacity: 0; transform: translate(-50%, -44%) scale(0.96); filter: blur(4px); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: blur(0px); }
        }

        .neon-app .app-header {
            display: flex; 
            align-items: center; 
            gap: 10px; 
            margin-bottom: 1.2em;
            border-bottom: 1px solid hsl(var(--hue2) 60% 70% / 0.3); 
            padding-bottom: 0.6em;
        }
        
        .neon-app .app-header svg { 
            width: 26px;
            height: 26px; 
            stroke: hsl(var(--hue1) 80% 80%); 
        }
        
        .neon-app .app-header h2 {
            font-size: 1.5rem; 
            font-weight: 500; 
            font-family: 'Amaranth', sans-serif; 
            font-style: italic;
            text-shadow: 0 0 10px hsl(var(--hue1) 80% 70% / 0.6); 
            margin: 0; 
        }
        
        .neon-app .app-content {
            font-size: 0.95rem; 
            line-height: 1.5; 
            color: rgba(255,255,255,0.95);
            min-height: 120px; 
            background: rgba(0,0,0,0.2); 
            border-radius: 20px; 
            padding: 1.2em;
            border: 0.5px solid rgba(255,255,255,0.1); 
        }

        .neon-app .app-close {
            position: absolute; 
            top: 14px; 
            right: 18px; 
            background: transparent; 
            border: none;
            color: rgba(255,255,255,0.6); 
            font-size: 26px; 
            cursor: pointer; 
            padding: 0 8px;
            border-radius: 30px; 
            line-height: 1;
            transition: 0.2s;
            z-index: 10;
        }
        .neon-app .app-close:hover {
            background: rgba(255,255,255,0.15);
            color: white;
        }

        /* --- –ò–ì–†–´ --- */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }
        
        .snake-grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 2px;
            background: rgba(0,0,0,0.4);
            padding: 8px;
            border-radius: 16px;
            width: 100%;
            aspect-ratio: 1;
        }
        
        .snake-cell {
            aspect-ratio: 1;
            background: rgba(20,30,50,0.6);
            border-radius: 4px;
            transition: 0.05s;
        }
        
        .snake-cell.snake {
            background: hsl(var(--hue1), 80%, 70%);
            box-shadow: 0 0 8px hsl(var(--hue1), 80%, 60%);
        }
        
        .snake-cell.food {
            background: hsl(var(--hue2), 80%, 70%);
            box-shadow: 0 0 8px hsl(var(--hue2), 80%, 60%);
            border-radius: 50%;
        }

        /* --- –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–† –° –ó–ê–ü–£–°–ö–û–ú --- */
        .file-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 350px;
            overflow-y: auto;
            margin-bottom: 16px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.8em 1em;
            background: rgba(0,0,0,0.25);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: 0.15s;
            cursor: pointer;
        }
        
        .file-item:hover {
            background: rgba(60,80,140,0.4);
            border-color: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }
        
        .file-icon {
            font-size: 1.8rem;
        }
        
        .file-info {
            flex: 1;
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 4px;
            color: white;
        }
        
        .file-meta {
            font-size: 0.7rem;
            opacity: 0.7;
        }
        
        .file-actions {
            display: flex;
            gap: 8px;
        }
        
        .file-run {
            background: hsl(var(--hue1), 70%, 60%);
            border: none;
            border-radius: 30px;
            padding: 0.4em 1.2em;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 0 8px hsl(var(--hue1), 70%, 50% / 0.3);
        }
        
        .file-run:hover {
            background: hsl(var(--hue1), 80%, 70%);
            transform: scale(1.05);
        }
        
        .file-delete {
            background: rgba(200,60,60,0.6);
            border: none;
            border-radius: 30px;
            padding: 0.4em 1em;
            color: white;
            font-size: 0.75rem;
            cursor: pointer;
        }
        
        .download-area {
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 1.5em;
            text-align: center;
            margin-top: 12px;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .download-area:hover {
            border-color: hsl(var(--hue1), 70%, 70%);
            background: rgba(100,100,200,0.1);
        }

        /* --- –ü–†–û–°–ú–û–¢–†–©–ò–ö –§–ê–ô–õ–û–í --- */
        .file-viewer {
            background: rgba(0,0,0,0.4);
            border-radius: 16px;
            padding: 1.2em;
            margin-top: 16px;
            border: 1px solid rgba(255,255,255,0.1);
            max-height: 300px;
            overflow-y: auto;
            font-family: var(--font-mono);
            white-space: pre-wrap;
            word-break: break-word;
        }

        .neon-notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(12px);
            color: white;
            padding: 0.8em 2em;
            border-radius: 50px;
            border: 1px solid hsl(var(--hue1) 70% 70% / 0.6);
            font-size: 0.9rem;
            z-index: 30000;
            animation: notifFade 4s ease forwards;
            box-shadow: 0 0 25px hsl(var(--hue1) 70% 60% / 0.4);
            max-width: 90vw;
            word-break: break-word;
            pointer-events: none;
        }
        @keyframes notifFade {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            15% { opacity: 1; transform: translateX(-50%) translateY(0); }
            85% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }

        .social-icon { 
            position: fixed; 
            bottom: 16px; 
            right: 16px; 
            z-index: 9999; 
            background: rgba(0,0,0,0.35); 
            backdrop-filter: blur(8px); 
            padding: 0.4em 1em; 
            border-radius: 30px; 
            border: 0.5px solid rgba(255,255,255,0.2); 
            color: #ccc; 
            text-decoration: none; 
            display: flex; 
            gap: 5px; 
            align-items: center; 
            font-size: 0.8rem; 
        }
        .social-icon svg { width: 18px; height: 18px; fill: currentColor; }
        .social-icon.codepen { right: auto; left: 16px; }
    </style>
</head>
<body>

<main id="app">
    <header>
        <h1>‚ö° NEON OS ¬∑ –ó–ê–ü–£–°–ö –§–ê–ô–õ–û–í</h1>
        <p>
            üöÄ –ò–≥—Ä—ã ¬∑ –ë—Ä–∞—É–∑–µ—Ä ¬∑ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ .exe .bat ¬∑ –ü—Ä–æ—Å–º–æ—Ç—Ä
            <span class="wallpaper-btn" id="openWallpaperMenu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/>
                </svg>
                –û–±–æ–∏
            </span>
        </p>
    </header>
    <footer class="dark">
        <h2>üé® –¢–µ–º–∞ ¬∑ <button class='random' id="randomBtn">randomize</button></h2>
        <input type="range" id="h1" min="0" max="360" value="255">
        <input type="range" id="h2" min="0" max="360" value="222">
    </footer>
</main>

<aside id="menu" class="open dark">
    <span class="shine shine-top"></span>
    <span class="shine shine-bottom"></span>
    <span class="glow glow-top"></span>
    <span class="glow glow-bottom"></span>
    <span class="glow glow-bright glow-top"></span>
    <span class="glow glow-bright glow-bottom"></span>
    <div class="inner">
        <section>
            <header style="font-size:0.7rem; opacity:0.8; letter-spacing:2px;">üéÆ –ò–ì–†–´</header>
            <ul>
                <li data-app="snake">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/>
                    </svg>
                    –ó–º–µ–π–∫–∞ Neon
                </li>
                <li data-app="snake2">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path d="M4 12h16M12 4v16"/>
                    </svg>
                    –ó–º–µ–π–∫–∞ –ö–ª–∞—Å—Å–∏–∫
                </li>
            </ul>
        </section>
        
        <hr>
        
        <section>
            <header style="font-size:0.7rem; opacity:0.8; letter-spacing:2px;">üåê –ò–ù–¢–ï–†–ù–ï–¢</header>
            <ul>
                <li data-app="browser">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/>
                    </svg>
                    NeonBrowser (WebView)
                </li>
                <li data-app="files">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/>
                    </svg>
                    –§–∞–π–ª—ã ¬∑ –ó–∞–ø—É—Å–∫
                </li>
            </ul>
        </section>
        
        <hr>
        
        <section>
            <header style="font-size:0.7rem; opacity:0.8; letter-spacing:2px;">üß∞ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø</header>
            <ul>
                <li data-app="weather">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg>
                    –ü–æ–≥–æ–¥–∞ (–†–æ—Å—Å–∏—è)
                </li>
                <li data-app="calculator">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"/></svg>
                    –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
                </li>
                <li data-app="terminal">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg>
                    –¢–µ—Ä–º–∏–Ω–∞–ª
                </li>
                <li data-app="timer">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6v6l4 2m-4-10.5a9 9 0 1 0 0 18 9 9 0 0 0 0-18Z"/></svg>
                    –¢–∞–π–º–µ—Ä
                </li>
            </ul>
        </section>

        <section class="wallpaper-section">
            <header style="font-size:0.7rem; opacity:0.8; display:flex; align-items:center; gap:4px;">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor">
                    <path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/>
                </svg>
                –û–±–æ–∏
            </header>
            <div class="wallpaper-grid" id="wallpaperGrid"></div>
        </section>
    </div>
</aside>

<a class="social-icon codepen" href="https://codepen.io/simeydotme">‚ö° Neon OS</a>
<a class="social-icon twitter" href="https://twitter.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737s-2.643 2.06-2.62 3.737v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84 0 0 0 .497-3.753c-.002-.249 1.51-2.772 1.818-4.013z"/></svg></a>
<a class="social-icon github" href="https://github.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2 4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0c-2.4-1.6-3.5-1.3-3.5-1.3a4.2 4.2 0 0 0-.1 3.2 4.6 4.6 0 0 0-1.3 3.2c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2v3.5"/></svg></a>

<script>
    (function(){
        "use strict";

        // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
        const $menu = document.getElementById('menu');
        const $menuItems = $menu.querySelectorAll('li');
        const $hue1 = document.getElementById('h1');
        const $hue2 = document.getElementById('h2');
        const $rand = document.getElementById('randomBtn');
        const $openWallpaperBtn = document.getElementById('openWallpaperMenu');
        let cleanTimer;

        // ========== API –ö–õ–Æ–ß ==========
        const WEATHER_API_KEY = "181ac29b75bb4115a86191537261102";
        
        const RUSSIAN_CITIES = ["–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ö–∞–∑–∞–Ω—å", "–°–æ—á–∏", "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫"];

        // ========== –§–ê–ô–õ–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê NEON OS ==========
        let neonFileSystem = JSON.parse(localStorage.getItem('neon-files')) || [
            { name: "–ø—Ä–∏–≤–µ—Ç.txt", type: "txt", size: "1.2 KB", date: new Date().toLocaleDateString(), content: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Neon OS! –≠—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏." },
            { name: "neon_installer.exe", type: "exe", size: "2.5 MB", date: new Date().toLocaleDateString(), content: "NEON_INSTALLER_v1.0" },
            { name: "setup.bat", type: "bat", size: "0.8 KB", date: new Date().toLocaleDateString(), content: "@echo off\necho –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Neon OS...\necho –ì–æ—Ç–æ–≤–æ!" },
            { name: "wallpaper.png", type: "png", size: "3.1 MB", date: new Date().toLocaleDateString(), content: "IMAGE_DATA" },
            { name: "ambient.mp3", type: "mp3", size: "5.7 MB", date: new Date().toLocaleDateString(), content: "AUDIO_DATA" },
            { name: "–¥–æ–∫—É–º–µ–Ω—Ç.md", type: "md", size: "0.5 KB", date: new Date().toLocaleDateString(), content: "# Neon OS\n## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è\n–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ñ–∞–π–ª—ã –¥–≤–æ–π–Ω—ã–º –∫–ª–∏–∫–æ–º!" }
        ];

        function saveFileSystem() {
            localStorage.setItem('neon-files', JSON.stringify(neonFileSystem));
        }

        // ========== –°–ò–°–¢–ï–ú–ê –ó–ê–ü–£–°–ö–ê –§–ê–ô–õ–û–í ==========
        function runFile(file) {
            const ext = file.type.toLowerCase();
            
            // --- –ó–ê–ü–£–°–ö .EXE / .BAT / .MSI (—É—Å—Ç–∞–Ω–æ–≤–∫–∞) ---
            if (ext === 'exe' || ext === 'bat' || ext === 'cmd' || ext === 'msi') {
                showNotification(`‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞: ${file.name} ...`, 3000);
                
                // –°–æ–∑–¥–∞–µ–º –æ–∫–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                setTimeout(() => {
                    const installerWin = document.createElement('div');
                    installerWin.className = 'neon-app';
                    installerWin.style.width = '400px';
                    installerWin.innerHTML = `
                        <button class="app-close">‚úï</button>
                        <div class="app-header">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                                <path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <h2>–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ Neon</h2>
                        </div>
                        <div class="app-content" style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 16px;">üì¶</div>
                            <div style="margin-bottom: 20px; font-size: 1.1rem;">${file.name}</div>
                            <div style="background: rgba(0,0,0,0.4); border-radius: 30px; padding: 12px; margin-bottom: 16px;">
                                ‚ö†Ô∏è –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ ¬∑ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º
                            </div>
                            <div style="display: flex; gap: 12px; justify-content: center;">
                                <button id="installBtn" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer;">‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                                <button class="app-close" style="position: static; background: rgba(255,255,255,0.2); padding: 0.6em 2em; border-radius: 30px;">‚ùå –û—Ç–º–µ–Ω–∞</button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(installerWin);
                    
                    installerWin.querySelector('#installBtn').addEventListener('click', () => {
                        showNotification(`‚úÖ ${file.name} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Neon OS`, 2500);
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
                        neonFileSystem.push({
                            name: `${file.name.replace('.exe','')}_—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.app`,
                            type: 'app',
                            size: '1.0 KB',
                            date: new Date().toLocaleDateString(),
                            content: 'NEON_APP_INSTALLED'
                        });
                        saveFileSystem();
                        
                        installerWin.remove();
                    });
                    
                    installerWin.querySelectorAll('.app-close').forEach(btn => {
                        btn.addEventListener('click', () => installerWin.remove());
                    });
                }, 200);
                
                return;
            }
            
            // --- –ó–ê–ü–£–°–ö .TXT / .MD / .LOG (–ø—Ä–æ—Å–º–æ—Ç—Ä) ---
            if (ext === 'txt' || ext === 'md' || ext === 'log' || ext === 'json' || ext === 'js' || ext === 'css' || ext === 'html') {
                const viewerWin = document.createElement('div');
                viewerWin.className = 'neon-app';
                viewerWin.style.width = '480px';
                viewerWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5"/>
                        </svg>
                        <h2>${file.name}</h2>
                    </div>
                    <div class="app-content">
                        <div class="file-viewer">
                            ${file.content || '–ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ'}
                        </div>
                        <div style="display: flex; gap: 8px; margin-top: 16px; justify-content: flex-end;">
                            <button id="editFileBtn" style="background: rgba(255,255,255,0.2); border: none; padding: 0.5em 1.5em; border-radius: 30px; color: white; cursor: pointer;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(viewerWin);
                
                viewerWin.querySelector('#editFileBtn')?.addEventListener('click', () => {
                    const newContent = prompt('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:', file.content || '');
                    if (newContent !== null) {
                        file.content = newContent;
                        saveFileSystem();
                        viewerWin.querySelector('.file-viewer').innerHTML = newContent;
                        showNotification('üíæ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
                    }
                });
                
                viewerWin.querySelector('.app-close').addEventListener('click', () => viewerWin.remove());
                return;
            }
            
            // --- –ó–ê–ü–£–°–ö .PNG / .JPG / .GIF (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) ---
            if (ext === 'png' || ext === 'jpg' || ext === 'jpeg' || ext === 'gif' || ext === 'svg') {
                showNotification(`üñºÔ∏è –û—Ç–∫—Ä—ã—Ç–∏–µ ${file.name}`, 1500);
                // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const imgWin = document.createElement('div');
                imgWin.className = 'neon-app';
                imgWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/></svg>
                        <h2>${file.name}</h2>
                    </div>
                    <div class="app-content" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">
                        <div style="background: linear-gradient(45deg, hsl(var(--hue1),70%,60%), hsl(var(--hue2),70%,60%)); width: 200px; height: 200px; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                            üñºÔ∏è
                        </div>
                    </div>
                `;
                document.body.appendChild(imgWin);
                imgWin.querySelector('.app-close').addEventListener('click', () => imgWin.remove());
                return;
            }
            
            // --- –ó–ê–ü–£–°–ö .MP3 / .WAV (–º—É–∑—ã–∫–∞) ---
            if (ext === 'mp3' || ext === 'wav' || ext === 'ogg' || ext === 'flac') {
                showNotification(`üéµ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ: ${file.name}`, 2000);
                const audioWin = document.createElement('div');
                audioWin.className = 'neon-app';
                audioWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a2.25 2.25 0 01-2.673-1.632l-.377-1.32a2.25 2.25 0 011.632-2.673L19.5 9.553z"/></svg>
                        <h2>Neon Player</h2>
                    </div>
                    <div class="app-content" style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üéµ</div>
                        <div style="margin-bottom: 20px;"><b>${file.name}</b></div>
                        <div style="background: rgba(0,0,0,0.4); border-radius: 30px; padding: 12px;">
                            ‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (—ç–º—É–ª—è—Ü–∏—è)
                        </div>
                    </div>
                `;
                document.body.appendChild(audioWin);
                audioWin.querySelector('.app-close').addEventListener('click', () => audioWin.remove());
                return;
            }
            
            // --- –î–†–£–ì–ò–ï –§–ê–ô–õ–´ ---
            showNotification(`üìÑ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å ${file.type}. –ù–µ—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏.`, 2000);
        }

        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –ó–ê–ì–†–£–ó–û–ö ==========
        function handleDownloadedFile(filename, content) {
            const ext = filename.split('.').pop().toLowerCase();
            
            const newFile = {
                name: filename,
                type: ext,
                size: Math.floor(Math.random() * 10 + 1) + '.' + Math.floor(Math.random() * 9) + ' KB',
                date: new Date().toLocaleDateString(),
                content: content || `–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ ${filename} (–∑–∞–≥—Ä—É–∂–µ–Ω–æ)`
            };
            
            neonFileSystem.push(newFile);
            saveFileSystem();
            
            // –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
            if (['exe', 'bat', 'msi', 'cmd'].includes(ext)) {
                showNotification(`‚ö†Ô∏è –ó–∞–≥—Ä—É–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫: ${filename} (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞)`, 4000);
            } else {
                showNotification(`üì• –ó–∞–≥—Ä—É–∂–µ–Ω: ${filename}`, 2500);
            }
        }

        // ========== –û–ë–û–ò ==========
        const wallpapers = [
            { name: "Abstract Neon", url: "https://assets.codepen.io/13471/abstract-light.jpg", preview: "https://assets.codepen.io/13471/abstract-light.jpg", overlay: "linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%))" },
            { name: "Cyber Grid", url: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=500&auto=format", preview: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=100&h=60&fit=crop", overlay: "linear-gradient(45deg, hsl(var(--hue1) 70% 60% / 0.2), hsl(var(--hue2) 70% 60% / 0.2))" },
            { name: "Neon City", url: "https://images.unsplash.com/photo-1519608487953-e17c5135a08e?w=500&auto=format", preview: "https://images.unsplash.com/photo-1519608487953-e17c5135a08e?w=100&h=60&fit=crop", overlay: "linear-gradient(135deg, hsl(var(--hue1) 70% 60% / 0.3), hsl(var(--hue2) 70% 60% / 0.3))" }
        ];

        function showNotification(text, duration = 2500) {
            const notif = document.createElement('div');
            notif.className = 'neon-notification';
            notif.textContent = text;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), duration);
        }

        function setWallpaper(url, overlay) {
            document.documentElement.style.setProperty('--wallpaper', `url('${url}')`);
            document.documentElement.style.setProperty('--wallpaper-overlay', overlay);
        }

        function initWallpaperGrid() {
            const $wallpaperGrid = document.getElementById('wallpaperGrid');
            $wallpaperGrid.innerHTML = '';
            wallpapers.forEach((wp, index) => {
                const item = document.createElement('div');
                item.className = 'wallpaper-item';
                item.style.backgroundImage = `url('${wp.preview}')`;
                item.dataset.index = index;
                item.dataset.url = wp.url;
                item.dataset.overlay = wp.overlay;
                item.title = wp.name;
                
                const currentWallpaper = localStorage.getItem('neon-wallpaper-url') || wallpapers[0].url;
                if (wp.url === currentWallpaper) item.classList.add('active');
                
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    document.querySelectorAll('.wallpaper-item').forEach(el => el.classList.remove('active'));
                    item.classList.add('active');
                    setWallpaper(wp.url, wp.overlay);
                    localStorage.setItem('neon-wallpaper-url', wp.url);
                    localStorage.setItem('neon-wallpaper-overlay', wp.overlay);
                    showNotification(`üé® –û–±–æ–∏: ${wp.name}`);
                });
                $wallpaperGrid.appendChild(item);
            });
        }

        function loadSavedWallpaper() {
            const savedUrl = localStorage.getItem('neon-wallpaper-url');
            const savedOverlay = localStorage.getItem('neon-wallpaper-overlay');
            if (savedUrl) setWallpaper(savedUrl, savedOverlay);
            else setWallpaper(wallpapers[0].url, wallpapers[0].overlay);
        }

        // ---------- –ú–ï–ù–Æ ----------
        document.addEventListener("contextmenu", (e) => {
            const menuBox = $menu.getBoundingClientRect();
            const win = { width: window.innerWidth, height: window.innerHeight };
            let pos = { x: e.clientX, y: e.clientY };
            const pad = { x: 20, y: 20 };
            if (pos.x + menuBox.width >= win.width - pad.x) pos.x = win.width - menuBox.width - pad.x;
            if (pos.y + menuBox.height >= win.height - pad.y) pos.y = win.height - menuBox.height - pad.y;
            if (!$menu.contains(e.target)) {
                $menu.style.left = pos.x + 'px';
                $menu.style.top = pos.y + 'px';
                $menu.classList.add('open');
                clearTimeout(cleanTimer);
            }
            e.preventDefault();
        });

        $openWallpaperBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const btnRect = $openWallpaperBtn.getBoundingClientRect();
            $menu.style.left = (btnRect.left - 20) + 'px';
            $menu.style.top = (btnRect.top - 320) + 'px';
            $menu.classList.add('open');
            clearTimeout(cleanTimer);
        });

        document.addEventListener('pointerdown', (e) => {
            const isMenu = $menu.contains(e.target);
            const isSlider = e.target.matches && e.target.matches('input[type="range"]');
            const isWallpaperBtn = e.target === $openWallpaperBtn || $openWallpaperBtn?.contains(e.target);
            
            if (!isMenu && !isSlider && !isWallpaperBtn) {
                $menu.classList.remove('open');
                cleanTimer = setTimeout(() => {
                    $menuItems.forEach(el => el.classList.remove('selected'));
                }, 200);
            } else if (isMenu && e.target.matches && e.target.matches('li')) {
                $menuItems.forEach(el => el.classList.remove('selected'));
                e.target.classList.add('selected');
            }
        });

        // ---------- –¶–í–ï–¢–û–í–´–ï –°–õ–ê–ô–î–ï–†–´ ----------
        $hue1.addEventListener('input', (e) => {
            requestAnimationFrame(() => {
                document.body.style.setProperty('--hue1', e.target.value);
                localStorage.setItem('neon-glass-hue1', e.target.value);
            });
        });
        $hue2.addEventListener('input', (e) => {
            requestAnimationFrame(() => {
                document.body.style.setProperty('--hue2', e.target.value);
                localStorage.setItem('neon-glass-hue2', e.target.value);
            });
        });

        const setHues = (random = false) => {
            const r1 = 120 + Math.floor(Math.random() * 240);
            const r2 = r1 - 80 + (Math.floor(Math.random() * 60) - 30);
            const v1 = random ? r1 : (localStorage.getItem('neon-glass-hue1') ?? r1);
            const v2 = random ? r2 : (localStorage.getItem('neon-glass-hue2') ?? r2);
            $hue1.value = v1; 
            $hue2.value = v2;
            document.body.style.setProperty('--hue1', v1);
            document.body.style.setProperty('--hue2', v2);
        };
        setHues();
        $rand.addEventListener('click', () => { setHues(true); showNotification('üé® –¢–µ–º–∞ —Å–ª—É—á–∞–π–Ω–∞—è!'); });

        window.addEventListener('keydown', (e) => { 
            if (e.key === 'Escape') {
                $menu.classList.remove('open');
                const app = document.querySelector('.neon-app'); 
                if (app) app.remove(); 
            } 
        });

        function closeCurrentApp() {
            const existing = document.querySelector('.neon-app');
            if (existing) existing.remove();
        }

        // ========== –ò–ì–†–ê: –ó–ú–ï–ô–ö–ê ==========
        function createSnakeGame(size = 15) {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/></svg>
                    <h2>Neon Snake ${size}x${size}</h2>
                </div>
                <div class="app-content game-container">
                    <div id="snakeGrid" class="snake-grid" style="grid-template-columns: repeat(${size}, 1fr);"></div>
                    <div style="display: flex; justify-content: space-between; width: 100%;">
                        <span>üêç –î–ª–∏–Ω–∞: <span id="snakeScore">3</span></span>
                        <span id="snakeStatus">‚ñ∂Ô∏è –ò–≥—Ä–∞</span>
                    </div>
                    <button id="snakeRestart" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 1.5em; border-radius: 30px; color: white; cursor: pointer;">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                </div>
            `;
            document.body.appendChild(win);
            
            const grid = win.querySelector('#snakeGrid');
            for (let i = 0; i < size * size; i++) {
                const cell = document.createElement('div');
                cell.className = 'snake-cell';
                grid.appendChild(cell);
            }
            
            let cells = win.querySelectorAll('.snake-cell');
            let snake = [Math.floor(size/2) * size + Math.floor(size/2)];
            let direction = 'right';
            let food = -1;
            let gameInterval;
            let gameActive = true;
            let score = 3;
            
            function placeFood() {
                const empty = [];
                cells.forEach((cell, idx) => {
                    if (!snake.includes(idx)) empty.push(idx);
                });
                if (empty.length) {
                    food = empty[Math.floor(Math.random() * empty.length)];
                    cells[food]?.classList.add('food');
                }
            }
            
            function updateGrid() {
                cells.forEach(cell => cell.classList.remove('snake', 'food'));
                snake.forEach(seg => cells[seg]?.classList.add('snake'));
                if (food !== -1) cells[food]?.classList.add('food');
            }
            
            function moveSnake() {
                if (!gameActive) return;
                
                const head = snake[0];
                const row = Math.floor(head / size);
                const col = head % size;
                let newHead = head;
                
                if (direction === 'right') newHead = row * size + (col + 1);
                else if (direction === 'left') newHead = row * size + (col - 1);
                else if (direction === 'up') newHead = (row - 1) * size + col;
                else if (direction === 'down') newHead = (row + 1) * size + col;
                
                if (newHead < 0 || newHead >= size * size || 
                    (direction === 'right' && col === size - 1) ||
                    (direction === 'left' && col === 0) ||
                    (direction === 'up' && row === 0) ||
                    (direction === 'down' && row === size - 1) ||
                    (snake.includes(newHead) && newHead !== snake[snake.length - 1])) {
                    win.querySelector('#snakeStatus').innerHTML = 'üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞';
                    gameActive = false;
                    clearInterval(gameInterval);
                    return;
                }
                
                snake.unshift(newHead);
                if (newHead === food) {
                    score++;
                    win.querySelector('#snakeScore').textContent = score;
                    placeFood();
                } else {
                    snake.pop();
                }
                updateGrid();
            }
            
            function initGame() {
                gameActive = true;
                win.querySelector('#snakeStatus').innerHTML = '‚ñ∂Ô∏è –ò–≥—Ä–∞';
                snake = [Math.floor(size/2) * size + Math.floor(size/2)];
                direction = 'right';
                score = 3;
                win.querySelector('#snakeScore').textContent = '3';
                if (food !== -1) cells[food]?.classList.remove('food');
                updateGrid();
                placeFood();
                if (gameInterval) clearInterval(gameInterval);
                gameInterval = setInterval(moveSnake, 150);
            }
            
            win.addEventListener('keydown', (e) => {
                if (!gameActive) return;
                e.preventDefault();
                if (e.key === 'ArrowUp' && direction !== 'down') direction = 'up';
                if (e.key === 'ArrowDown' && direction !== 'up') direction = 'down';
                if (e.key === 'ArrowLeft' && direction !== 'right') direction = 'left';
                if (e.key === 'ArrowRight' && direction !== 'left') direction = 'right';
            });
            
            win.querySelector('#snakeRestart').addEventListener('click', initGame);
            win.tabIndex = 0;
            win.focus();
            
            initGame();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ù–ï–û–ù–ë–†–ê–£–ó–ï–† ==========
        function createNeonBrowser() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/></svg>
                    <h2>NeonBrowser</h2>
                </div>
                <div class="app-content">
                    <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                        <input id="browserUrl" class="browser-url" style="flex:1; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.2); border-radius:30px; padding:0.6em 1em; color:white;" placeholder="https://" value="https://example.com">
                        <button id="browserGo" style="background:hsl(var(--hue1),70%,60%); border:none; border-radius:30px; padding:0 1.5em; color:white;">–ü–µ—Ä–µ–π—Ç–∏</button>
                    </div>
                    <div style="background: white; border-radius: 16px; height: 300px; overflow: hidden;">
                        <iframe id="browserFrame" src="https://example.com" style="width:100%; height:100%; border:none;"></iframe>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            const urlInput = win.querySelector('#browserUrl');
            const frame = win.querySelector('#browserFrame');
            
            win.querySelector('#browserGo').addEventListener('click', () => {
                let url = urlInput.value.trim();
                if (!url.startsWith('http')) url = 'https://' + url;
                frame.src = url;
                
                // –≠–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–æ–∫
                setTimeout(() => {
                    if (url.includes('.exe') || url.includes('.bat')) {
                        const filename = url.split('/').pop() || 'file.exe';
                        handleDownloadedFile(filename, '–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞');
                    }
                }, 1000);
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–† (–° –ó–ê–ü–£–°–ö–û–ú) ==========
        function createFileManager() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.style.width = '600px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/></svg>
                    <h2>–§–∞–π–ª—ã Neon OS ¬∑ –ó–∞–ø—É—Å–∫</h2>
                </div>
                <div class="app-content">
                    <div class="file-list" id="fileList"></div>
                    <div class="download-area" id="downloadArea">
                        ‚¨áÔ∏è –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
                        <input type="file" id="fileUpload" multiple style="display: none;">
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            function renderFiles() {
                const list = win.querySelector('#fileList');
                list.innerHTML = '';
                neonFileSystem.forEach((file, index) => {
                    const item = document.createElement('div');
                    item.className = 'file-item';
                    
                    let icon = 'üìÑ';
                    if (file.type === 'exe' || file.type === 'bat') icon = '‚öôÔ∏è';
                    else if (file.type === 'txt' || file.type === 'md') icon = 'üìù';
                    else if (file.type === 'png' || file.type === 'jpg') icon = 'üñºÔ∏è';
                    else if (file.type === 'mp3') icon = 'üéµ';
                    else if (file.type === 'app') icon = '‚úÖ';
                    
                    item.innerHTML = `
                        <span class="file-icon">${icon}</span>
                        <div class="file-info">
                            <div class="file-name">${file.name}</div>
                            <div class="file-meta">${file.size} ¬∑ ${file.date}</div>
                        </div>
                        <div class="file-actions">
                            <button class="file-run" data-index="${index}">üöÄ –ó–∞–ø—É—Å–∫</button>
                            <button class="file-delete" data-index="${index}">üóëÔ∏è</button>
                        </div>
                    `;
                    
                    item.querySelector('.file-run').addEventListener('click', (e) => {
                        e.stopPropagation();
                        runFile(file);
                    });
                    
                    item.querySelector('.file-delete').addEventListener('click', (e) => {
                        e.stopPropagation();
                        neonFileSystem.splice(index, 1);
                        saveFileSystem();
                        renderFiles();
                        showNotification(`üóëÔ∏è ${file.name} —É–¥–∞–ª–µ–Ω`);
                    });
                    
                    // –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ = –∑–∞–ø—É—Å–∫
                    item.addEventListener('dblclick', () => runFile(file));
                    
                    list.appendChild(item);
                });
            }
            
            // Drag & Drop
            const dropArea = win.querySelector('#downloadArea');
            const fileInput = win.querySelector('#fileUpload');
            
            dropArea.addEventListener('click', () => fileInput.click());
            
            dropArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'hsl(var(--hue1),70%,70%)';
            });
            
            dropArea.addEventListener('dragleave', () => {
                dropArea.style.borderColor = 'rgba(255,255,255,0.3)';
            });
            
            dropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'rgba(255,255,255,0.3)';
                const files = e.dataTransfer.files;
                for (let file of files) {
                    handleDownloadedFile(file.name, `–ü–µ—Ä–µ—Ç–∞—â–µ–Ω: ${file.name}`);
                }
                renderFiles();
            });
            
            fileInput.addEventListener('change', () => {
                for (let file of fileInput.files) {
                    handleDownloadedFile(file.name, `–ó–∞–≥—Ä—É–∂–µ–Ω: ${file.name}`);
                }
                renderFiles();
                fileInput.value = '';
            });
            
            renderFiles();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ü–û–ì–û–î–ê ==========
        async function fetchWeather(city) {
            try {
                const res = await fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${encodeURIComponent(city)}&lang=ru`);
                const data = await res.json();
                return { temp: data.current.temp_c, condition: data.current.condition.text };
            } catch { return null; }
        }

        function createWeatherApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `<button class="app-close">‚úï</button><div class="app-header"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg><h2>–ü–æ–≥–æ–¥–∞</h2></div><div class="app-content"><div id="weatherDisplay">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</div><div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:16px;">${RUSSIAN_CITIES.map(c => `<button class="weather-city" style="background:rgba(30,40,70,0.6); border:none; border-radius:30px; padding:0.5em 1em; color:white;">${c}</button>`).join('')}</div></div>`;
            document.body.appendChild(win);
            
            win.querySelectorAll('.weather-city').forEach(btn => {
                btn.addEventListener('click', async () => {
                    const weather = await fetchWeather(btn.textContent);
                    win.querySelector('#weatherDisplay').innerHTML = weather ? 
                        `<div style="font-size:2rem;">${btn.textContent}: ${weather.temp}¬∞C</div><div>${weather.condition}</div>` : 
                        '‚ùå –û—à–∏–±–∫–∞';
                });
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ---------- –ó–ê–ì–õ–£–®–ö–ò ----------
        function createCalculator() { closeCurrentApp(); showNotification('üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)'); }
        function createTerminalApp() { closeCurrentApp(); showNotification('üíª –¢–µ—Ä–º–∏–Ω–∞–ª Neon OS'); }
        function createTimerApp() { closeCurrentApp(); showNotification('‚è±Ô∏è –¢–∞–π–º–µ—Ä'); }

        // ---------- –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–ô ----------
        const appLauncher = {
            snake: () => createSnakeGame(15),
            snake2: () => createSnakeGame(12),
            browser: createNeonBrowser,
            files: createFileManager,
            weather: createWeatherApp,
            calculator: createCalculator,
            terminal: createTerminalApp,
            timer: createTimerApp
        };

        $menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const appId = item.dataset.app;
                if (appId && appLauncher[appId]) {
                    appLauncher[appId]();
                    $menu.classList.remove('open');
                    showNotification(`‚ú® ${item.textContent.trim()}`, 1500);
                }
            });
        });

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
        initWallpaperGrid();
        loadSavedWallpaper();
        saveFileSystem();
    })();
</script>
</body>
</html>
