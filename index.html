<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=no">
    <title>Neon OS ¬∑ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ .app</title>
    <link href="https://fonts.googleapis.com/css2?family=Asap:wght@300;400;500;600;700&family=Amaranth:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --hue1: 255; --hue2: 222; --border: 1px; --border-color: hsl(var(--hue2), 12%, 20%);
            --radius: 22px; --ease: cubic-bezier(0.5, 1, 0.89, 1);
            --glass-bg: linear-gradient(235deg, hsl(var(--hue1) 50% 10% / 0.8), hsl(var(--hue1) 50% 10% / 0) 33%), 
                        linear-gradient(45deg , hsl(var(--hue2) 50% 10% / 0.8), hsl(var(--hue2) 50% 10% / 0) 33%), 
                        linear-gradient(hsl(220deg 25% 4.8% / 0.9));
            --font-mono: 'JetBrains Mono', monospace;
            --wallpaper: url('https://assets.codepen.io/13471/abstract-light.jpg');
            --wallpaper-overlay: linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%));
        }
        body {
            background: #08090d;
            background-image: var(--wallpaper), var(--wallpaper-overlay);
            background-size: cover; background-position: center; background-blend-mode: hard-light;
            color: #e0e5ee; font-family: 'Asap', sans-serif; min-height: 100vh;
        }
        #app { min-height: 100svh; padding: 2svw; display: flex; flex-direction: column; justify-content: space-between; }
        #app > header {
            background: rgba(0,0,0,0.2); backdrop-filter: blur(8px); padding: 1.5em 2em; border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1); max-width: 750px;
        }
        #app > header h1 { color: color-mix(in oklab, #fff 70%, hsl(var(--hue1) 50% 50%)); font-size: 2rem; text-shadow: 0 0 12px hsl(var(--hue1) 70% 60% / 0.5); }
        #app > header p { color: color-mix(in oklab, #fff 40%, hsl(var(--hue2) 50% 50%)); display: flex; gap: 12px; flex-wrap: wrap; }
        #app > footer {
            align-self: end; background: rgba(0,0,0,0.25); backdrop-filter: blur(8px); padding: 1em 2em; border-radius: 40px;
            border: 0.5px solid rgba(255,255,255,0.1); display: flex; flex-wrap: wrap; gap: 0.5em;
        }
        #app > footer h2 { width: 100%; font-size: 1em; font-weight: 400; color: rgba(255,255,255,0.8); }
        footer h2 button {
            font-family: Amaranth, sans-serif; font-style: italic; display: inline-flex; padding: 0.25em 0.8em;
            background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.25); border-radius: 3em;
            color: white; cursor: pointer; font-size: 0.9rem;
        }
        #app > footer [type=range] { width: 180px; accent-color: hsl(var(--hue2) 66% 60%); }
        .wallpaper-btn {
            background: rgba(20,30,50,0.6); border: 1px solid rgba(255,255,255,0.2); color: white;
            padding: 0.4em 1.2em; border-radius: 30px; display: inline-flex; align-items: center; gap: 6px; cursor: pointer;
        }
        #menu {
            visibility: hidden; opacity: 0; pointer-events: none; transition: 0.25s var(--ease); filter: blur(4px);
            position: fixed; top: 140px; left: 2svw; min-width: 290px; max-width: 330px;
            border-radius: var(--radius); border: var(--border) solid var(--border-color); padding: 1em;
            background: var(--glass-bg); backdrop-filter: blur(16px); z-index: 10000; max-height: 80vh; overflow-y: auto;
        }
        #menu.open { visibility: visible; opacity: 1; pointer-events: auto; filter: blur(0px); }
        #menu .inner { display: flex; flex-direction: column; gap: 0.6em; font-size: 0.85rem; }
        #menu li {
            --item-hue: var(--hue2); padding: 0.6em 0.8em; display: flex; align-items: center; gap: 0.7em;
            border-radius: 14px; background: linear-gradient(90deg in oklch, hsl(var(--item-hue) 29% 13% / var(--item-opacity,0)),
                      hsl(var(--item-hue) 30% 15% / var(--item-opacity,0)) 24% 32%, transparent 95%) border-box;
            cursor: pointer; font-size: 0.85rem; border: 1px solid transparent;
        }
        #menu li svg { width: 18px; height: 18px; stroke-width: 1.5; flex-shrink: 0; }
        #menu li:hover { --item-opacity: 0.6; color: white; }
        .wallpaper-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 8px;
        }
        .wallpaper-item {
            aspect-ratio: 16/9; border-radius: 8px; border: 1.5px solid transparent; cursor: pointer;
            background-size: cover; background-position: center;
        }
        .wallpaper-item.active { border-color: white; box-shadow: 0 0 12px hsl(var(--hue1) 80% 70%); }
        .neon-app {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 550px; max-width: 95vw; max-height: 85vh; overflow-y: auto;
            background: linear-gradient(145deg, hsl(var(--hue1) 40% 12% / 0.97), hsl(var(--hue2) 40% 8% / 0.97));
            backdrop-filter: blur(24px); border: 1px solid hsl(var(--hue1) 60% 60% / 0.5); border-radius: 28px;
            padding: 1.5em; box-shadow: 0 20px 48px -12px black; color: white; z-index: 20000;
            opacity: 0; animation: neonAppear 0.3s var(--ease) forwards;
        }
        @keyframes neonAppear {
            0% { opacity: 0; transform: translate(-50%, -44%) scale(0.96); filter: blur(4px); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: blur(0px); }
        }
        .neon-app .app-header { display: flex; align-items: center; gap: 10px; margin-bottom: 1.2em; border-bottom: 1px solid hsl(var(--hue2) 60% 70% / 0.3); padding-bottom: 0.6em; }
        .neon-app .app-header h2 { font-size: 1.5rem; font-family: 'Amaranth', sans-serif; font-style: italic; text-shadow: 0 0 10px hsl(var(--hue1) 80% 70% / 0.6); }
        .neon-app .app-content { background: rgba(0,0,0,0.2); border-radius: 20px; padding: 1.2em; border: 0.5px solid rgba(255,255,255,0.1); }
        .neon-app .app-close { position: absolute; top: 14px; right: 18px; background: transparent; border: none; color: rgba(255,255,255,0.6); font-size: 26px; cursor: pointer; padding: 0 8px; border-radius: 30px; }
        .neon-app .app-close:hover { background: rgba(255,255,255,0.15); color: white; }
        .snake-grid { display: grid; grid-template-columns: repeat(15, 1fr); gap: 2px; background: rgba(0,0,0,0.4); padding: 8px; border-radius: 16px; aspect-ratio: 1; }
        .snake-cell { aspect-ratio: 1; background: rgba(20,30,50,0.6); border-radius: 4px; }
        .snake-cell.snake { background: hsl(var(--hue1), 80%, 70%); box-shadow: 0 0 8px hsl(var(--hue1), 80%, 60%); }
        .snake-cell.food { background: hsl(var(--hue2), 80%, 70%); box-shadow: 0 0 8px hsl(var(--hue2), 80%, 60%); border-radius: 50%; }
        .file-list { display: flex; flex-direction: column; gap: 8px; max-height: 350px; overflow-y: auto; margin-bottom: 16px; }
        .file-item { display: flex; align-items: center; gap: 12px; padding: 0.8em 1em; background: rgba(0,0,0,0.25); border-radius: 16px; border: 1px solid rgba(255,255,255,0.05); cursor: pointer; transition: 0.15s; }
        .file-item:hover { background: rgba(60,80,140,0.4); border-color: rgba(255,255,255,0.2); }
        .file-icon { font-size: 1.8rem; }
        .file-info { flex: 1; }
        .file-name { font-weight: 600; color: white; }
        .file-meta { font-size: 0.7rem; opacity: 0.7; }
        .file-actions { display: flex; gap: 8px; }
        .file-run { background: hsl(var(--hue1), 70%, 60%); border: none; border-radius: 30px; padding: 0.4em 1.2em; color: white; font-size: 0.75rem; font-weight: 600; cursor: pointer; }
        .file-delete { background: rgba(200,60,60,0.6); border: none; border-radius: 30px; padding: 0.4em 1em; color: white; font-size: 0.75rem; cursor: pointer; }
        .download-area { border: 2px dashed rgba(255,255,255,0.3); border-radius: 20px; padding: 1.5em; text-align: center; cursor: pointer; transition: 0.2s; }
        .download-area:hover { border-color: hsl(var(--hue1), 70%, 70%); background: rgba(100,100,200,0.1); }
        .file-viewer { background: rgba(0,0,0,0.4); border-radius: 16px; padding: 1.2em; margin-top: 16px; border: 1px solid rgba(255,255,255,0.1); max-height: 300px; overflow-y: auto; font-family: var(--font-mono); white-space: pre-wrap; }
        .neon-notification {
            position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.95); backdrop-filter: blur(12px); color: white; padding: 0.8em 2em;
            border-radius: 50px; border: 1px solid hsl(var(--hue1) 70% 70% / 0.6); font-size: 0.9rem;
            z-index: 30000; animation: notifFade 4s ease forwards; max-width: 90vw;
        }
        @keyframes notifFade {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            15% { opacity: 1; transform: translateX(-50%) translateY(0); }
            85% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        .social-icon {
            position: fixed; bottom: 16px; right: 16px; z-index: 9999; background: rgba(0,0,0,0.35);
            backdrop-filter: blur(8px); padding: 0.4em 1em; border-radius: 30px; color: #ccc; text-decoration: none;
            display: flex; gap: 5px; align-items: center; font-size: 0.8rem;
        }
        .social-icon.codepen { right: auto; left: 16px; }
    </style>
</head>
<body>

<main id="app">
    <header>
        <h1>‚ö° NEON OS ¬∑ .APP –ò–°–ü–†–ê–í–õ–ï–ù</h1>
        <p>üöÄ –ò–≥—Ä—ã ¬∑ –ë—Ä–∞—É–∑–µ—Ä ¬∑ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ .exe ‚Üí .app ¬∑ –ó–∞–ø—É—Å–∫ .app</p>
    </header>
    <footer class="dark">
        <h2>üé® –¢–µ–º–∞ ¬∑ <button class='random' id="randomBtn">randomize</button></h2>
        <input type="range" id="h1" min="0" max="360" value="255">
        <input type="range" id="h2" min="0" max="360" value="222">
        <span class="wallpaper-btn" id="openWallpaperMenu">üé® –û–±–æ–∏</span>
    </footer>
</main>

<aside id="menu">
    <div class="inner">
        <section>
            <header>üéÆ –ò–ì–†–´</header>
            <ul>
                <li data-app="snake"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/></svg> –ó–º–µ–π–∫–∞ Neon</li>
                <li data-app="snake2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 12h16M12 4v16"/></svg> –ó–º–µ–π–∫–∞ –ö–ª–∞—Å—Å–∏–∫</li>
            </ul>
        </section>
        <hr>
        <section>
            <header>üåê –ò–ù–¢–ï–†–ù–ï–¢</header>
            <ul>
                <li data-app="browser"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/></svg> NeonBrowser</li>
                <li data-app="files"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/></svg> –§–∞–π–ª—ã ¬∑ –ó–∞–ø—É—Å–∫ .app</li>
            </ul>
        </section>
        <hr>
        <section>
            <header>üß∞ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø</header>
            <ul>
                <li data-app="weather"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg> –ü–æ–≥–æ–¥–∞</li>
                <li data-app="terminal"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/></svg> –¢–µ—Ä–º–∏–Ω–∞–ª</li>
            </ul>
        </section>
        <section class="wallpaper-section">
            <header>üé® –û–±–æ–∏</header>
            <div class="wallpaper-grid" id="wallpaperGrid"></div>
        </section>
    </div>
</aside>

<a class="social-icon codepen" href="https://codepen.io/simeydotme">‚ö° Neon OS</a>
<a class="social-icon twitter" href="https://twitter.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737s-2.643 2.06-2.62 3.737v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84 0 0 0 .497-3.753c-.002-.249 1.51-2.772 1.818-4.013z"/></svg></a>
<a class="social-icon github" href="https://github.com/simeydotme"><svg viewBox="0 0 24 24"><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2 4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0c-2.4-1.6-3.5-1.3-3.5-1.3a4.2 4.2 0 0 0-.1 3.2 4.6 4.6 0 0 0-1.3 3.2c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2v3.5"/></svg></a>

<script>
    (function(){
        "use strict";

        // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
        const $menu = document.getElementById('menu');
        const $menuItems = $menu.querySelectorAll('li');
        const $hue1 = document.getElementById('h1');
        const $hue2 = document.getElementById('h2');
        const $rand = document.getElementById('randomBtn');
        const $openWallpaperBtn = document.getElementById('openWallpaperMenu');

        // ========== –§–ê–ô–õ–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê ==========
        let neonFileSystem = JSON.parse(localStorage.getItem('neon-files')) || [
            { name: "–ø—Ä–∏–≤–µ—Ç.txt", type: "txt", size: "1.2 KB", date: new Date().toLocaleDateString(), content: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Neon OS!" },
            { name: "neon_installer.exe", type: "exe", size: "2.5 MB", date: new Date().toLocaleDateString(), content: "NEON_INSTALLER_v1.0" },
            { name: "setup.bat", type: "bat", size: "0.8 KB", date: new Date().toLocaleDateString(), content: "@echo off\necho –£—Å—Ç–∞–Ω–æ–≤–∫–∞..." },
            { name: "game.app", type: "app", size: "1.8 MB", date: new Date().toLocaleDateString(), content: "NEON_APP_INSTALLED", appName: "–ù–µ–æ–Ω–æ–≤–∞—è –ó–º–µ–π–∫–∞" }
        ];

        function saveFileSystem() {
            localStorage.setItem('neon-files', JSON.stringify(neonFileSystem));
        }

        // ========== –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –ó–ê–ü–£–°–ö –§–ê–ô–õ–û–í ==========
        function runFile(file) {
            const ext = file.type.toLowerCase();
            
            // ‚úÖ .APP ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            if (ext === 'app') {
                showNotification(`üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ${file.appName || file.name}`, 2000);
                
                const appWin = document.createElement('div');
                appWin.className = 'neon-app';
                appWin.style.width = '400px';
                appWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <h2>${file.appName || file.name.replace('.app','')}</h2>
                    </div>
                    <div class="app-content" style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">‚úÖ</div>
                        <div style="margin-bottom: 20px; font-size: 1.1rem;">
                            ${file.appName || file.name}<br>
                            <span style="opacity: 0.7; font-size: 0.9rem;">–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ Neon OS</span>
                        </div>
                        <div style="background: rgba(0,0,0,0.4); border-radius: 30px; padding: 12px; margin-bottom: 16px;">
                            üñ•Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
                        </div>
                        <button class="app-close" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer; position: static;">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                `;
                document.body.appendChild(appWin);
                appWin.querySelectorAll('.app-close').forEach(btn => {
                    btn.addEventListener('click', () => appWin.remove());
                });
                return;
            }
            
            // ‚úÖ .EXE / .BAT / .MSI / .CMD ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞
            if (['exe', 'bat', 'msi', 'cmd'].includes(ext)) {
                showNotification(`‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞: ${file.name} ...`, 2500);
                
                setTimeout(() => {
                    const installerWin = document.createElement('div');
                    installerWin.className = 'neon-app';
                    installerWin.style.width = '420px';
                    installerWin.innerHTML = `
                        <button class="app-close">‚úï</button>
                        <div class="app-header">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <h2>–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ Neon</h2>
                        </div>
                        <div class="app-content" style="text-align: center;">
                            <div style="font-size: 2.5rem; margin-bottom: 16px;">üì¶</div>
                            <div style="margin-bottom: 20px; font-size: 1.1rem;">${file.name}</div>
                            <div style="background: rgba(0,0,0,0.4); border-radius: 30px; padding: 12px; margin-bottom: 16px;">
                                ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞
                            </div>
                            <div style="display: flex; gap: 12px; justify-content: center;">
                                <button id="installBtn" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer;">‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                                <button class="app-close" style="background: rgba(255,255,255,0.2); border: none; padding: 0.6em 2em; border-radius: 30px; color: white; cursor: pointer;">‚ùå –û—Ç–º–µ–Ω–∞</button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(installerWin);
                    
                    installerWin.querySelector('#installBtn').addEventListener('click', () => {
                        // –°–û–ó–î–ê–Å–ú .app –§–ê–ô–õ
                        const appName = file.name.replace('.exe', '').replace('.bat', '').replace('.msi', '').replace('.cmd', '');
                        const newApp = {
                            name: `${appName}.app`,
                            type: 'app',
                            size: '1.2 MB',
                            date: new Date().toLocaleDateString(),
                            content: 'NEON_APP_INSTALLED',
                            appName: appName
                        };
                        neonFileSystem.push(newApp);
                        saveFileSystem();
                        showNotification(`‚úÖ ${appName}.app —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.`, 3500);
                        installerWin.remove();
                    });
                    
                    installerWin.querySelectorAll('.app-close').forEach(btn => {
                        btn.addEventListener('click', () => installerWin.remove());
                    });
                }, 200);
                return;
            }
            
            // ‚úÖ .TXT / .MD / .LOG / .JSON / .JS ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            if (['txt', 'md', 'log', 'json', 'js', 'css', 'html'].includes(ext)) {
                const viewerWin = document.createElement('div');
                viewerWin.className = 'neon-app';
                viewerWin.style.width = '500px';
                viewerWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M8.25 6.75h7.5M8.25 12h7.5m-7.5 5.25h7.5"/>
                        </svg>
                        <h2>${file.name}</h2>
                    </div>
                    <div class="app-content">
                        <div class="file-viewer">${file.content || '–ü—É—Å—Ç–æ–π —Ñ–∞–π–ª'}</div>
                        <div style="display: flex; gap: 8px; margin-top: 16px; justify-content: flex-end;">
                            <button id="editFileBtn" style="background: rgba(255,255,255,0.2); border: none; padding: 0.5em 1.5em; border-radius: 30px; color: white; cursor: pointer;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(viewerWin);
                
                viewerWin.querySelector('#editFileBtn')?.addEventListener('click', () => {
                    const newContent = prompt('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:', file.content || '');
                    if (newContent !== null) {
                        file.content = newContent;
                        saveFileSystem();
                        viewerWin.querySelector('.file-viewer').innerHTML = newContent;
                        showNotification('üíæ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
                    }
                });
                
                viewerWin.querySelector('.app-close').addEventListener('click', () => viewerWin.remove());
                return;
            }
            
            // ‚úÖ .PNG / .JPG / .GIF ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            if (['png', 'jpg', 'jpeg', 'gif', 'svg'].includes(ext)) {
                const imgWin = document.createElement('div');
                imgWin.className = 'neon-app';
                imgWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"/>
                        </svg>
                        <h2>${file.name}</h2>
                    </div>
                    <div class="app-content" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">
                        <div style="background: linear-gradient(45deg, hsl(var(--hue1),70%,60%), hsl(var(--hue2),70%,60%)); width: 200px; height: 200px; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                            üñºÔ∏è
                        </div>
                    </div>
                `;
                document.body.appendChild(imgWin);
                imgWin.querySelector('.app-close').addEventListener('click', () => imgWin.remove());
                return;
            }
            
            // ‚úÖ .MP3 / .WAV ‚Äî –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä
            if (['mp3', 'wav', 'ogg', 'flac'].includes(ext)) {
                const audioWin = document.createElement('div');
                audioWin.className = 'neon-app';
                audioWin.innerHTML = `
                    <button class="app-close">‚úï</button>
                    <div class="app-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a2.25 2.25 0 01-2.673-1.632l-.377-1.32a2.25 2.25 0 011.632-2.673L19.5 9.553z"/>
                        </svg>
                        <h2>Neon Player</h2>
                    </div>
                    <div class="app-content" style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üéµ</div>
                        <div style="margin-bottom: 20px;"><b>${file.name}</b></div>
                        <div style="background: rgba(0,0,0,0.4); border-radius: 30px; padding: 12px;">
                            ‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (—ç–º—É–ª—è—Ü–∏—è)
                        </div>
                    </div>
                `;
                document.body.appendChild(audioWin);
                audioWin.querySelector('.app-close').addEventListener('click', () => audioWin.remove());
                return;
            }
            
            // ‚ö†Ô∏è –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
            showNotification(`‚ùå –ù–µ—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –¥–ª—è .${ext}`, 2000);
        }

        // ========== –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í ==========
        function handleDownloadedFile(filename, content = '') {
            const ext = filename.split('.').pop().toLowerCase();
            
            const newFile = {
                name: filename,
                type: ext,
                size: Math.floor(Math.random() * 5 + 1) + '.' + Math.floor(Math.random() * 9) + ' MB',
                date: new Date().toLocaleDateString(),
                content: content || `–°–æ–¥–µ—Ä–∂–∏–º–æ–µ ${filename}`
            };
            
            neonFileSystem.push(newFile);
            saveFileSystem();
            
            if (['exe', 'bat', 'msi', 'cmd'].includes(ext)) {
                showNotification(`üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫: ${filename}`, 3000);
            } else {
                showNotification(`üì• –ó–∞–≥—Ä—É–∂–µ–Ω: ${filename}`, 2000);
            }
        }

        // ========== –§–ê–ô–õ–û–í–´–ô –ú–ï–ù–ï–î–ñ–ï–† ==========
        function createFileManager() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.style.width = '620px';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M2.5 12.5L9 5l6.5 7.5M9 5v14"/>
                    </svg>
                    <h2>–§–∞–π–ª—ã Neon OS ¬∑ .app —Ä–∞–±–æ—Ç–∞–µ—Ç!</h2>
                </div>
                <div class="app-content">
                    <div class="file-list" id="fileList"></div>
                    <div class="download-area" id="downloadArea">
                        ‚¨áÔ∏è –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
                        <input type="file" id="fileUpload" multiple style="display: none;">
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            function renderFiles() {
                const list = win.querySelector('#fileList');
                list.innerHTML = '';
                neonFileSystem.forEach((file, index) => {
                    const item = document.createElement('div');
                    item.className = 'file-item';
                    
                    let icon = 'üìÑ';
                    if (file.type === 'app') icon = '‚úÖ';
                    else if (file.type === 'exe' || file.type === 'bat') icon = '‚öôÔ∏è';
                    else if (file.type === 'txt' || file.type === 'md') icon = 'üìù';
                    else if (['png', 'jpg', 'gif'].includes(file.type)) icon = 'üñºÔ∏è';
                    else if (file.type === 'mp3') icon = 'üéµ';
                    
                    item.innerHTML = `
                        <span class="file-icon">${icon}</span>
                        <div class="file-info">
                            <div class="file-name">${file.name}</div>
                            <div class="file-meta">${file.size} ¬∑ ${file.date}</div>
                        </div>
                        <div class="file-actions">
                            <button class="file-run" data-index="${index}">üöÄ –ó–∞–ø—É—Å–∫</button>
                            <button class="file-delete" data-index="${index}">üóëÔ∏è</button>
                        </div>
                    `;
                    
                    item.querySelector('.file-run').addEventListener('click', (e) => {
                        e.stopPropagation();
                        runFile(file);
                    });
                    
                    item.querySelector('.file-delete').addEventListener('click', (e) => {
                        e.stopPropagation();
                        neonFileSystem.splice(index, 1);
                        saveFileSystem();
                        renderFiles();
                        showNotification(`üóëÔ∏è ${file.name} —É–¥–∞–ª–µ–Ω`);
                    });
                    
                    item.addEventListener('dblclick', () => runFile(file));
                    
                    list.appendChild(item);
                });
            }
            
            const dropArea = win.querySelector('#downloadArea');
            const fileInput = win.querySelector('#fileUpload');
            
            dropArea.addEventListener('click', () => fileInput.click());
            
            dropArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'hsl(var(--hue1),70%,70%)';
            });
            
            dropArea.addEventListener('dragleave', () => {
                dropArea.style.borderColor = 'rgba(255,255,255,0.3)';
            });
            
            dropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                dropArea.style.borderColor = 'rgba(255,255,255,0.3)';
                const files = e.dataTransfer.files;
                for (let file of files) {
                    handleDownloadedFile(file.name, `–ü–µ—Ä–µ—Ç–∞—â–µ–Ω: ${file.name}`);
                }
                renderFiles();
            });
            
            fileInput.addEventListener('change', () => {
                for (let file of fileInput.files) {
                    handleDownloadedFile(file.name, `–ó–∞–≥—Ä—É–∂–µ–Ω: ${file.name}`);
                }
                renderFiles();
                fileInput.value = '';
            });
            
            renderFiles();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ó–ú–ï–ô–ö–ê ==========
        function createSnakeGame(size = 15) {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="9"/>
                    </svg>
                    <h2>Neon Snake ${size}x${size}</h2>
                </div>
                <div class="app-content">
                    <div id="snakeGrid" class="snake-grid" style="grid-template-columns: repeat(${size}, 1fr);"></div>
                    <div style="display: flex; justify-content: space-between; margin-top: 12px;">
                        <span>üêç –î–ª–∏–Ω–∞: <span id="snakeScore">3</span></span>
                        <span id="snakeStatus">‚ñ∂Ô∏è</span>
                    </div>
                    <button id="snakeRestart" style="background: hsl(var(--hue1),70%,60%); border: none; padding: 0.6em 1.5em; border-radius: 30px; color: white; cursor: pointer; margin-top: 12px;">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                </div>
            `;
            document.body.appendChild(win);
            
            const grid = win.querySelector('#snakeGrid');
            for (let i = 0; i < size * size; i++) {
                grid.appendChild(document.createElement('div')).className = 'snake-cell';
            }
            
            const cells = win.querySelectorAll('.snake-cell');
            let snake = [Math.floor(size/2) * size + Math.floor(size/2)];
            let direction = 'right';
            let food = -1;
            let gameInterval;
            let gameActive = true;
            let score = 3;
            
            function placeFood() {
                const empty = [];
                cells.forEach((cell, idx) => { if (!snake.includes(idx)) empty.push(idx); });
                if (empty.length) {
                    food = empty[Math.floor(Math.random() * empty.length)];
                    cells[food]?.classList.add('food');
                }
            }
            
            function updateGrid() {
                cells.forEach(cell => cell.classList.remove('snake', 'food'));
                snake.forEach(seg => cells[seg]?.classList.add('snake'));
                if (food !== -1) cells[food]?.classList.add('food');
            }
            
            function moveSnake() {
                if (!gameActive) return;
                const head = snake[0];
                const row = Math.floor(head / size);
                const col = head % size;
                let newHead = head;
                
                if (direction === 'right') newHead = row * size + (col + 1);
                else if (direction === 'left') newHead = row * size + (col - 1);
                else if (direction === 'up') newHead = (row - 1) * size + col;
                else if (direction === 'down') newHead = (row + 1) * size + col;
                
                if (newHead < 0 || newHead >= size * size || 
                    (direction === 'right' && col === size - 1) ||
                    (direction === 'left' && col === 0) ||
                    (direction === 'up' && row === 0) ||
                    (direction === 'down' && row === size - 1) ||
                    (snake.includes(newHead) && newHead !== snake[snake.length - 1])) {
                    win.querySelector('#snakeStatus').innerHTML = 'üíÄ';
                    gameActive = false;
                    clearInterval(gameInterval);
                    return;
                }
                
                snake.unshift(newHead);
                if (newHead === food) {
                    score++;
                    win.querySelector('#snakeScore').textContent = score;
                    placeFood();
                } else {
                    snake.pop();
                }
                updateGrid();
            }
            
            function initGame() {
                gameActive = true;
                win.querySelector('#snakeStatus').innerHTML = '‚ñ∂Ô∏è';
                snake = [Math.floor(size/2) * size + Math.floor(size/2)];
                direction = 'right';
                score = 3;
                win.querySelector('#snakeScore').textContent = '3';
                if (food !== -1) cells[food]?.classList.remove('food');
                updateGrid();
                placeFood();
                if (gameInterval) clearInterval(gameInterval);
                gameInterval = setInterval(moveSnake, 150);
            }
            
            win.addEventListener('keydown', (e) => {
                if (!gameActive) return;
                e.preventDefault();
                if (e.key === 'ArrowUp' && direction !== 'down') direction = 'up';
                if (e.key === 'ArrowDown' && direction !== 'up') direction = 'down';
                if (e.key === 'ArrowLeft' && direction !== 'right') direction = 'left';
                if (e.key === 'ArrowRight' && direction !== 'left') direction = 'right';
            });
            
            win.querySelector('#snakeRestart').addEventListener('click', initGame);
            win.tabIndex = 0;
            win.focus();
            
            initGame();
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== NEONBROWSER ==========
        function createNeonBrowser() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="9"/><path d="M12 3v18M3 12h18"/>
                    </svg>
                    <h2>NeonBrowser</h2>
                </div>
                <div class="app-content">
                    <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                        <input id="browserUrl" style="flex:1; background:rgba(0,0,0,0.4); border:1px solid rgba(255,255,255,0.2); border-radius:30px; padding:0.6em 1em; color:white;" placeholder="https://" value="https://example.com">
                        <button id="browserGo" style="background:hsl(var(--hue1),70%,60%); border:none; border-radius:30px; padding:0 1.5em; color:white;">–ü–µ—Ä–µ–π—Ç–∏</button>
                    </div>
                    <div style="background: white; border-radius: 16px; height: 300px; overflow: hidden;">
                        <iframe id="browserFrame" src="https://example.com" style="width:100%; height:100%; border:none;"></iframe>
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            const urlInput = win.querySelector('#browserUrl');
            const frame = win.querySelector('#browserFrame');
            
            win.querySelector('#browserGo').addEventListener('click', () => {
                let url = urlInput.value.trim();
                if (!url.startsWith('http')) url = 'https://' + url;
                frame.src = url;
                
                setTimeout(() => {
                    if (url.includes('.exe') || url.includes('.bat')) {
                        const filename = url.split('/').pop() || 'file.exe';
                        handleDownloadedFile(filename, '–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞');
                        showNotification(`‚¨áÔ∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è: ${filename}`, 2000);
                    }
                }, 1000);
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –ü–û–ì–û–î–ê ==========
        async function fetchWeather(city) {
            try {
                const res = await fetch(`https://api.weatherapi.com/v1/current.json?key=181ac29b75bb4115a86191537261102&q=${encodeURIComponent(city)}&lang=ru`);
                const data = await res.json();
                return { temp: data.current.temp_c, condition: data.current.condition.text };
            } catch { return null; }
        }

        function createWeatherApp() {
            closeCurrentApp();
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/>
                    </svg>
                    <h2>–ü–æ–≥–æ–¥–∞</h2>
                </div>
                <div class="app-content">
                    <div id="weatherDisplay" style="margin-bottom: 16px;">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</div>
                    <div style="display:flex; gap:8px; flex-wrap:wrap;">
                        ${['–ú–æ—Å–∫–≤–∞','–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä','–°–ü–±','–ö–∞–∑–∞–Ω—å','–°–æ—á–∏'].map(c => 
                            `<button class="weather-city" style="background:rgba(30,40,70,0.6); border:none; border-radius:30px; padding:0.5em 1em; color:white;">${c}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            document.body.appendChild(win);
            
            win.querySelectorAll('.weather-city').forEach(btn => {
                btn.addEventListener('click', async () => {
                    const weather = await fetchWeather(btn.textContent);
                    win.querySelector('#weatherDisplay').innerHTML = weather ? 
                        `<div style="font-size:2rem;">${btn.textContent}: ${weather.temp}¬∞C</div><div>${weather.condition}</div>` : 
                        '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                });
            });
            
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –¢–ï–†–ú–ò–ù–ê–õ ==========
        function createTerminalApp() {
            closeCurrentApp();
            showNotification('üíª –¢–µ—Ä–º–∏–Ω–∞–ª Neon OS', 1500);
            const win = document.createElement('div');
            win.className = 'neon-app';
            win.innerHTML = `
                <button class="app-close">‚úï</button>
                <div class="app-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 5.25h13.5A2.25 2.25 0 0 0 21 15V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v9a2.25 2.25 0 0 0 2.25 2.25Z"/>
                    </svg>
                    <h2>–¢–µ—Ä–º–∏–Ω–∞–ª</h2>
                </div>
                <div class="app-content" style="font-family: 'JetBrains Mono'; background: #0a0c12;">
                    <div>‚ùØ neon@os:~$</div>
                    <div>‚úÖ .app –∑–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω</div>
                    <div>‚ùØ ls *.app</div>
                    <div>${neonFileSystem.filter(f => f.type === 'app').map(f => f.name).join('\n') || '–ù–µ—Ç .app'}</div>
                </div>
            `;
            document.body.appendChild(win);
            win.querySelector('.app-close').addEventListener('click', () => win.remove());
        }

        // ========== –û–ë–û–ò ==========
        const wallpapers = [
            { name: "Abstract Neon", url: "https://assets.codepen.io/13471/abstract-light.jpg", preview: "https://assets.codepen.io/13471/abstract-light.jpg", overlay: "linear-gradient(to right in oklab, hsl(var(--hue2) 50% 75%), hsl(var(--hue1) 50% 75%))" }
        ];

        function showNotification(text, duration = 2500) {
            const notif = document.createElement('div');
            notif.className = 'neon-notification';
            notif.textContent = text;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), duration);
        }

        function setWallpaper(url, overlay) {
            document.documentElement.style.setProperty('--wallpaper', `url('${url}')`);
            document.documentElement.style.setProperty('--wallpaper-overlay', overlay);
        }

        function initWallpaperGrid() {
            const grid = document.getElementById('wallpaperGrid');
            wallpapers.forEach((wp, i) => {
                const item = document.createElement('div');
                item.className = 'wallpaper-item';
                item.style.backgroundImage = `url('${wp.preview}')`;
                item.dataset.url = wp.url;
                item.dataset.overlay = wp.overlay;
                item.title = wp.name;
                if (i === 0) item.classList.add('active');
                item.addEventListener('click', () => {
                    document.querySelectorAll('.wallpaper-item').forEach(el => el.classList.remove('active'));
                    item.classList.add('active');
                    setWallpaper(wp.url, wp.overlay);
                    localStorage.setItem('neon-wallpaper-url', wp.url);
                    localStorage.setItem('neon-wallpaper-overlay', wp.overlay);
                });
                grid.appendChild(item);
            });
        }

        function loadSavedWallpaper() {
            const savedUrl = localStorage.getItem('neon-wallpaper-url');
            const savedOverlay = localStorage.getItem('neon-wallpaper-overlay');
            if (savedUrl) setWallpaper(savedUrl, savedOverlay);
            else setWallpaper(wallpapers[0].url, wallpapers[0].overlay);
        }

        // ========== –°–ò–°–¢–ï–ú–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function closeCurrentApp() {
            const existing = document.querySelector('.neon-app');
            if (existing) existing.remove();
        }

        // ---------- –ú–ï–ù–Æ ----------
        document.addEventListener("contextmenu", (e) => {
            const menuBox = $menu.getBoundingClientRect();
            const win = { width: window.innerWidth, height: window.innerHeight };
            let pos = { x: e.clientX, y: e.clientY };
            if (pos.x + menuBox.width >= win.width - 20) pos.x = win.width - menuBox.width - 20;
            if (pos.y + menuBox.height >= win.height - 20) pos.y = win.height - menuBox.height - 20;
            if (!$menu.contains(e.target)) {
                $menu.style.left = pos.x + 'px';
                $menu.style.top = pos.y + 'px';
                $menu.classList.add('open');
            }
            e.preventDefault();
        });

        $openWallpaperBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const rect = $openWallpaperBtn.getBoundingClientRect();
            $menu.style.left = (rect.left - 20) + 'px';
            $menu.style.top = (rect.top - 300) + 'px';
            $menu.classList.add('open');
        });

        document.addEventListener('pointerdown', (e) => {
            if (!$menu.contains(e.target) && !e.target.matches('input[type="range"]') && e.target !== $openWallpaperBtn) {
                $menu.classList.remove('open');
            }
        });

        // ---------- –¶–í–ï–¢–û–í–´–ï –°–õ–ê–ô–î–ï–†–´ ----------
        $hue1.addEventListener('input', (e) => {
            document.body.style.setProperty('--hue1', e.target.value);
            localStorage.setItem('neon-glass-hue1', e.target.value);
        });
        $hue2.addEventListener('input', (e) => {
            document.body.style.setProperty('--hue2', e.target.value);
            localStorage.setItem('neon-glass-hue2', e.target.value);
        });

        const setHues = (random = false) => {
            const r1 = 120 + Math.floor(Math.random() * 240);
            const r2 = r1 - 80 + (Math.floor(Math.random() * 60) - 30);
            const v1 = random ? r1 : (localStorage.getItem('neon-glass-hue1') ?? r1);
            const v2 = random ? r2 : (localStorage.getItem('neon-glass-hue2') ?? r2);
            $hue1.value = v1; $hue2.value = v2;
            document.body.style.setProperty('--hue1', v1);
            document.body.style.setProperty('--hue2', v2);
        };
        setHues();
        $rand.addEventListener('click', () => { setHues(true); showNotification('üé® –¢–µ–º–∞ —Å–ª—É—á–∞–π–Ω–∞—è!'); });

        // ---------- –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–ô ----------
        const appLauncher = {
            snake: () => createSnakeGame(15),
            snake2: () => createSnakeGame(12),
            browser: createNeonBrowser,
            files: createFileManager,
            weather: createWeatherApp,
            terminal: createTerminalApp
        };

        $menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const appId = item.dataset.app;
                if (appId && appLauncher[appId]) {
                    appLauncher[appId]();
                    $menu.classList.remove('open');
                    showNotification(`‚ú® ${item.textContent.trim()}`, 1500);
                }
            });
        });

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
        initWallpaperGrid();
        loadSavedWallpaper();
        saveFileSystem();
    })();
</script>
</body>
</html>
